import{y as T,ac as F,r as U,N as t,ap as G,b as I,c as S,P as v,w as Y,ag as x,A as o,H as f,q as r,D as n,S as P,Q as p,B as l,v as z,F as h,I as C,K as k,ah as O,z as d,E as V}from"./index-9b822783.js";import{C as j,L as A,_ as E,B}from"./Container-05be0da0.js";import{l as q,n as N}from"./forwardRefs-af0663a3.js";import{V as H}from"./VCard-0d72f9dd.js";import{e as K}from"./VMenu-8029677e.js";import{V as Q}from"./VToolbar-79c684b4.js";/* empty css              */import"./VCardText-bc96863a.js";const W={style:{"margin-bottom":"10px"}},J={class:"line-clamp-1"},X={class:"line-clamp-1"},le=T({__name:"Players",setup(Z){const y=F(),c=U([]),$=t.subscribe_multi([G.PLAYER_CONFIG_UPDATED],()=>{g()});I($);const b=S(()=>Object.values(t.providers).filter(e=>e.available&&e.supported_features.includes(v.PLAYER_GROUP_CREATE)||e.supported_features.includes(v.SYNC_PLAYERS)).sort((e,i)=>(e.name||t.providerManifests[e.domain].name).toUpperCase()>(i.name||t.providerManifests[i.domain].name).toUpperCase()?1:-1)),g=async function(){c.value=(await t.getPlayerConfigs()).sort((e,i)=>m(e).localeCompare(m(i)))},w=function(e){t.removePlayerConfig(e),c.value=c.value.filter(i=>i.player_id!=e)},u=function(e){e in t.players&&y.push(`/settings/editplayer/${e}`)},L=function(e){y.push(`/settings/addgroup/${e}`)},M=function(e){e.enabled=!e.enabled,t.savePlayerConfig(e.player_id,{enabled:e.enabled})},m=function(e){var i;return e.name||((i=t.players[e.player_id])==null?void 0:i.display_name)||e.default_name||e.player_id},D=function(e){window.open(e,"_blank")};return Y(()=>t.players,e=>{e&&g()},{immediate:!0}),(e,i)=>{const R=x("hold");return o(),f("div",W,[r(Q,{density:"compact",class:"titlebar",color:"transparent",style:{height:"55px"}},{title:n(()=>[P(p(e.$t("settings.players")),1)]),append:n(()=>[b.value.length?(o(),l(K,{key:0},{activator:n(({props:a})=>[r(q,z(a,{color:"accent",variant:"outlined"}),{default:n(()=>[P(p(e.$t("settings.add_group_player")),1)]),_:2},1040)]),default:n(()=>[r(H,{density:"compact"},{default:n(()=>[(o(!0),f(h,null,C(b.value,a=>(o(),l(A,{key:a.instance_id,density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:a.name,onClick:_=>L(a.instance_id)},{prepend:n(()=>[r(E,{domain:a.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})):k("",!0)]),_:1}),r(j,null,{default:n(()=>[(o(!0),f(h,null,C(c.value,a=>{var _;return O((o(),l(A,{key:a.player_id,link:"","context-menu-items":[{label:"settings.configure",labelArgs:[],action:()=>{u(a.player_id)},icon:"mdi-cog"},{label:a.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{M(a)},icon:"mdi-cancel"},{label:"settings.documentation",labelArgs:[],action:()=>{var s;D((s=d(t).getProviderManifest(a.provider))==null?void 0:s.documentation)},icon:"mdi-bookshelf",disabled:!((_=d(t).getProviderManifest(a.provider))!=null&&_.documentation)},{label:"settings.delete",labelArgs:[],action:()=>{w(a.player_id)},icon:"mdi-delete"}],onClick:s=>u(a.player_id)},{prepend:n(()=>{var s;return[r(E,{domain:(s=d(t).getProviderManifest(a.provider))==null?void 0:s.domain,size:40,class:"listitem-media-thumb"},null,8,["domain"])]}),title:n(()=>[V("div",J,p(m(a)),1)]),subtitle:n(()=>{var s;return[V("div",X,p(((s=d(t).getProviderManifest(a.provider))==null?void 0:s.name)||a.provider),1)]}),append:n(()=>{var s;return[a.enabled?(s=d(t).players[a.player_id])!=null&&s.available?k("",!0):(o(),l(B,{key:1,icon:"",title:e.$t("settings.player_not_available")},{default:n(()=>[r(N,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(o(),l(B,{key:0,icon:"",title:e.$t("settings.player_disabled")},{default:n(()=>[r(N,{icon:"mdi-cancel"})]),_:1},8,["title"]))]}),_:2},1032,["context-menu-items","onClick"])),[[R,()=>{u(a.player_id)}]])}),128))]),_:1})])}}});export{le as default};
