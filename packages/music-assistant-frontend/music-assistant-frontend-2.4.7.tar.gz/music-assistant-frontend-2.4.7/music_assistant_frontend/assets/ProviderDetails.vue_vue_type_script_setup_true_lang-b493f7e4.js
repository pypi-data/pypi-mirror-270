import{p as W,g as X,q as t,y as Y,r as z,j as Z,ac as M,R as ee,w as te,c as H,A as i,H as p,D as a,B as u,K as d,z as c,J as T,E as v,S as w,Q as r,v as N,F as I,I as B,ai as F,L as S,O as R,as as ie,N as A,at as ae,a0 as oe,M as le}from"./index-9b822783.js";import{B as U,_ as q,L as G,C as se}from"./Container-05be0da0.js";import{M as x,g as j,b as ne}from"./VBadge-c9fb58c5.js";import{e as re,a as me}from"./contextmenu-b55bad56.js";import{a as de,i as ue,V as J,n as $,l as D,v as pe,k as ce}from"./forwardRefs-af0663a3.js";import{d as E,e as ye,b as O}from"./VMenu-8029677e.js";import{a as fe,V as ge}from"./VCardText-bc96863a.js";import{a as V,V as K,b as ve}from"./VCard-0d72f9dd.js";import{V as be}from"./VTooltip-5955b4ca.js";import{b as ke,c as he}from"./layout-71937d76.js";import{V as _e}from"./VDialog-a6f484ad.js";import{V as Ce}from"./VInput-c159036c.js";import{V as $e}from"./VToolbar-79c684b4.js";const Ve=W({...de(),...ke()},"VLayout"),we=X()({name:"VLayout",props:Ve(),setup(k,m){let{slots:y}=m;const{layoutClasses:h,layoutStyles:L,getLayoutItem:n,items:f,layoutRef:g}=he(k);return ue(()=>{var o;return t("div",{ref:g,class:[h.value,k.class],style:[L.value,k.style]},[(o=y.default)==null?void 0:o.call(y)])}),{getLayoutItem:n,items:f}}}),Le={key:0,xs5:"","pa-5":"",style:{height:"100%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Te={key:0},Ie={key:1},Be={style:{"padding-bottom":"10px"}},De=["onClick"],Re={style:{color:"primary"}},Ae={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},Pe=["innerHTML"],ze={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ze=Y({__name:"InfoHeader",props:{item:{}},setup(k){const m=k,y=z(!1),h=z(),{mobile:L}=Z(),n=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,f=M();ee(),te(()=>m.item,async e=>{e&&(h.value=j(m.item,F.FANART)||j(m.item,F.THUMB))},{immediate:!0});const g=function(e){f.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},o=function(e){f.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},_=H(()=>{let e="";return m.item?(m.item.metadata&&m.item.metadata.description?e=m.item.metadata.description:m.item.metadata&&m.item.metadata.copyright?e=m.item.metadata.copyright:"artists"in m.item&&m.item.artists.forEach(function(l){"metadata"in l&&l.metadata.description&&(e=l.metadata.description)}),e=e.replace(`\r
`,"<br /><br /><br />"),e=e.replace("\r","<br /><br />"),e=e.replace(`
`,"<br /><br />"),e):""}),P=H(()=>{const e=L.value?160:260;return _.value.length>e?_.value.substring(0,e)+"...":_.value});return(e,l)=>(i(),p("div",null,[t(K,{variant:"flat",img:c(n),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:a(()=>[e.item?d("",!0):(i(),u(pe,{key:0,indeterminate:""})),t(J,{width:"100%",height:"100%",cover:"",class:"background-image",src:h.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),c(S).prevScrollName?(i(),u(U,{key:1,"xx-large":"",style:{width:"40px",height:"5px",left:"4px",top:"15px",bottom:"0",padding:"0"},icon:"mdi-arrow-left",title:e.$t("tooltip.back"),onClick:l[0]||(l[0]=T(C=>c(f).go(-1),["stop"]))},null,8,["title"])):d("",!0),e.item?(i(),u(we,{key:2,style:{margin:"0",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:a(()=>{var C;return[e.$vuetify.display.mobile?d("",!0):(i(),p("div",Le,[e.item.media_type&&[c(R).ARTIST,c(R).PLAYLIST].includes(e.item.media_type)?(i(),p("div",Te,[t(E,{size:"192"},{default:a(()=>[t(x,{item:e.item,size:"100%"},null,8,["item"])]),_:1})])):(i(),p("div",Ie,[t(x,{size:"100%",item:e.item},null,8,["item"])]))])),v("div",null,[t(fe,null,{default:a(()=>[w(r(e.item.name),1)]),_:1}),v("div",Be,["version"in e.item&&e.item.version?(i(),u(V,{key:0,class:"caption"},{default:a(()=>[w(r(e.item.version)+" ",1),t(be,{location:"bottom"},{activator:a(({props:s})=>[c(ie)(e.item.metadata.explicit||!1)?(i(),u($,N({key:0},s,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:a(()=>[v("span",null,r(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(i(),u(V,{key:1,class:"title accent--text"},{default:a(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(i(!0),p(I,null,B(e.item.artists,(s,b)=>(i(),p("span",{key:s.item_id},[v("a",{style:{color:"accent"},onClick:Q=>o(s)},r(s.name),9,De),b+1<e.item.artists.length?(i(),p("span",{key:b,style:{color:"accent"}},r(" / "))):d("",!0)]))),128))]),_:1})):d("",!0),"artist"in e.item&&e.item.artist?(i(),u(V,{key:2,class:"title"},{default:a(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),v("a",{onClick:l[1]||(l[1]=s=>o(e.item.artist))},r(e.item.artist.name),1)]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(i(),u(V,{key:3,class:"title"},{default:a(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),v("a",Re,r(e.item.owner),1)]),_:1})):d("",!0),"album"in e.item&&e.item.album?(i(),u(V,{key:4},{default:a(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),v("a",{style:{color:"secondary"},onClick:l[2]||(l[2]=s=>{var b;return g((b=e.item)==null?void 0:b.album)})},r(e.item.album.name),1)]),_:1})):d("",!0)]),v("div",Ae,[t(D,{color:"primary","prepend-icon":"mdi-play-circle",disabled:!((C=c(S).selectedPlayer)!=null&&C.available),onClick:l[3]||(l[3]=s=>c(re).emit("playdialog",{items:[e.item],parentItem:e.item,showContextMenuItems:!1}))},{default:a(()=>[w(r(e.$t("play")),1)]),_:1},8,["disabled"]),t(ye,null,{activator:a(({props:s})=>[t(U,N({icon:"",style:{"margin-top":"-8px"}},s),{default:a(()=>[t($,{icon:"mdi-dots-vertical"})]),_:2},1040)]),default:a(()=>[t(O,null,{default:a(()=>[(i(!0),p(I,null,B(c(me)([e.item],e.item).filter(s=>s.hide!=!0),(s,b)=>(i(),u(G,{key:b,title:e.$t(s.label,s.labelArgs),disabled:s.disabled==!0,onClick:Q=>s.action?s.action():""},{prepend:a(()=>[t(E,{icon:s.icon},null,8,["icon"])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1}),t(D,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[l[4]||(l[4]=s=>c(A).toggleFavorite(e.item)),l[5]||(l[5]=T(()=>{},["prevent"])),l[6]||(l[6]=T(()=>{},["stop"]))]},null,8,["icon","title"]),t(q,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),P.value?(i(),u(V,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:l[7]||(l[7]=s=>y.value=!y.value)},{default:a(()=>[v("div",{innerHTML:P.value},null,8,Pe)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(i(),p("div",ze,[(i(!0),p(I,null,B(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),s=>(i(),u(Ce,{key:s,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:a(()=>[w(r(s),1)]),_:2},1024))),128))])):d("",!0)])]}),_:1})):d("",!0)]),_:1},8,["img"]),t(_e,{modelValue:y.value,"onUpdate:modelValue":l[9]||(l[9]=C=>y.value=C),"max-width":"975",width:"auto"},{default:a(()=>[t(K,null,{default:a(()=>[t(ge,{innerHTML:_.value},null,8,["innerHTML"]),t(ve,null,{default:a(()=>[t(D,{color:"primary",block:"",onClick:l[8]||(l[8]=C=>y.value=!1)},{default:a(()=>[w(r(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const He={style:{"margin-bottom":"10px"}},Ne={key:0},Fe=["title","onClick"],Se=["title"],Me=Y({__name:"ProviderDetails",props:{itemDetails:{}},setup(k){const m=function(n){window.open(n,"_blank")},y=ae({}),h=function(n){const f=`${n.provider_instance}.${n.item_id}`,g=y[f];if(g)g.load(),delete y[f];else{const o=new Audio(L(n.provider_instance,n.item_id));y[f]=o,o.play()}},L=function(n,f){return`${A.baseUrl}/preview?item_id=${encodeURIComponent(f)}&provider=${n}`};return(n,f)=>(i(),p("section",He,[t($e,{color:"transparent",title:n.$t("mapped_providers"),style:{height:"55px"}},null,8,["title"]),t(ce),t(se,null,{default:a(()=>[t(O,null,{default:a(()=>{var g;return[(i(!0),p(I,null,B((g=n.itemDetails)==null?void 0:g.provider_mappings,o=>(i(),u(G,{key:o.provider_instance},{prepend:a(()=>[t(q,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:a(()=>[w(r(c(A).providerManifests[o.provider_domain].name),1)]),subtitle:a(()=>[n.itemDetails.media_type==c(R).TRACK&&o.audio_format?(i(),p("span",Ne,r(o.audio_format.content_type)+" | "+r(o.audio_format.sample_rate/1e3)+"kHz/"+r(o.audio_format.bit_depth)+" bits | ",1)):d("",!0),o.url&&!o.provider_domain.startsWith("file")?(i(),p("a",{key:1,style:{opacity:"0.4"},title:n.$t("tooltip.open_provider_link"),onClick:T(_=>m(o.url),["prevent"])},r(o.url),9,Fe)):(i(),p("span",{key:2,style:{opacity:"0.4"},title:o.item_id},r(o.item_id),9,Se))]),append:a(()=>[o.audio_format&&o.audio_format.bit_depth>16?(i(),u(J,{key:0,src:c(ne),width:"30",class:oe(n.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),c(le)("bp1")&&n.itemDetails.media_type==c(R).TRACK?(i(),u(D,{key:1,icon:y[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:n.$t("tooltip.play_sample"),onClick:_=>h(o)},null,8,["icon","title","onClick"])):d("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{Ze as _,Me as a};
