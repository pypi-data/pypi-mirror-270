"use strict";(self.webpackChunkdidi_notebook_extension=self.webpackChunkdidi_notebook_extension||[]).push([[958],{958:(e,n,o)=>{o.r(n),o.d(n,{default:()=>T});var t=o(371),i=o(440),a=o(72),r=o.n(a),d=o(825),s=o.n(d),l=o(659),c=o.n(l),u=o(56),p=o.n(u),m=o(540),f=o.n(m),h=o(113),b=o.n(h),v=o(646),g={};g.styleTagTransform=b(),g.setAttributes=p(),g.insert=c().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=f(),r()(v.A,g),v.A&&v.A.locals&&v.A.locals;var k=o(215),y=o(943),w=o(506);let x="online";-1!==location.hostname.indexOf("notebook-test.bigdata.xiaojukeji.com")?x="test":-1!==location.hostname.indexOf("didiglobal.com")&&(x="global");const j="global"!==x?"280":"2824",{MainAreaWidget:C}=o(440),{Widget:L}=o(256),T={id:"didi-notebook-extension:plugin",description:"A JupyterLab extension.",autoStart:!0,requires:[k.IMainMenu,y.IFileBrowserFactory,i.ICommandPalette,w.INotebookTracker],optional:[t.ILabShell],activate:async(e,n,o,t,i,a)=>{const r=new URLSearchParams(window.location.search),d=r.get("from"),s=r.get("hideMenu")||!1;console.log("-----didi-notebook-extension url query----",r);const l=new L;if(l.id="didi-notebook-extension-plugin-window",l.title.label="didi-notebook-extension Window",l.title.closable=!0,"studio"===d){if(console.log("-----didi-notebook-extension----check from studio------"),document.body.classList.add("from-studio"),!await(async()=>{console.log("----------didi-notebook-extensio checkLogin-----------");try{let e=(await fetch("/api/isLogin",{method:"GET"})).body;if(console.log("----------didi-notebook-extensio checkLogin success data-----------",e),10001===(null==e?void 0:e.code)){let n="mis.diditaxi.com.cn";"global"===x&&(n="mis-auth.didiglobal.com"),console.log("----------didi-notebook-extensio checkLogin failed data-----------",e);const o=encodeURIComponent(location.href);window.location.href=`//${n}/auth/sso/login?app_id=${j}&jumpto=${o}&callback_index=2`}else if(0===e.code||1e4===e.code||14001===e.code)return e;return!0}catch(e){return console.error("Failed to check login status:",e),!0}})())return void console.log("-----didi-notebook-extension----check login failed------");console.log("-----didi-notebook-extension----check login success------"),console.log("------from studio  window------",window),l.node.addEventListener("message",(n=>{console.log("---------didi-notebook-extension 收到数据啦啦啦啦啦啦---------",n.data),"studio-debug-mode-save"===(n.data||{}).event&&e.commands.execute("docmanager:save")}));const n=new C({content:l});a&&(null==a||a.add(n,"main"))}"true"!==s&&!1===s||(document.body.classList.add("hide-menu"),a&&(a.leftCollapsed&&a.expandLeft(),a.rightCollapsed&&a.expandRight(),a.activeChanged.connect(((e,n)=>{e.leftCollapsed&&e.expandLeft(),e.rightCollapsed&&e.expandRight()})))),o.createFileBrowser("cur-file").model.fileChanged.connect(((e,n)=>{"save"===n.type&&(console.log("---didi-notebook-extension-----File saved-------"),window.parent.postMessage({event:"studio-debug-mode-save",key:"save"},"*"))})),console.log("JupyterLab extension didinotebooktest is activated! log",d,s),console.log("JupyterLab extension didi-notebook-extension is activated!",window,e)}}},475:(e,n,o)=>{o.d(n,{A:()=>d});var t=o(601),i=o.n(t),a=o(314),r=o.n(a)()(i());r.push([e.id,'/*\n    See the JupyterLab Developer Guide for useful CSS Patterns:\n\n    https://jupyterlab.readthedocs.io/en/stable/developer/css.html\n*/\n.hide-menu #jp-left-stack, \n.hide-menu #jp-right-stack,\n.hide-menu #jp-top-panel, \n.hide-menu .jp-SideBar,\n.hide-menu #jp-bottom-panel{\n    display: none !important;\n}\n.hide-menu #jp-main-dock-panel {\n    left: 0 !important;\n    width: 100% !important;\n}\n.hide-menu #jq-main-dock-panel #jp-main-dock-panel {\n    width: 100% !important;\n}\n.hide-menu #jp-main-vsplit-panel {\n    left: 0 !important;\n    width: 100% !important;\n}\n.hide-menu #jp-main-split-panel {\n    width: 100% !important;\n    left: 0 !important;\n}\n.hide-menu #jp-main-content-panel{\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n}\n.hide-menu .jp-NotebookPanel, .hide-menu .jp-Notebook {\n    width: 100% !important;\n}\n.hide-menu .jp-NotebookPanel  > .jp-NotebookPanel-toolbar,\n.hide-menu .lm-DockPanel  > .lm-DockPanel-tabBar\n {\n    width: 100% !important;\n}\n.from-studio .jp-KernelName, \n.from-studio .lm-DockPanel-tabBar,\n.from-studio .lm-TabBar \n.hide-menu.from-studio .jp-NotebookPanel  > .jp-NotebookPanel-toolbar,\n.hide-menu.from-studio .lm-DockPanel  > .lm-DockPanel-tabBar{\n    display: none !important;\n}\n.from-studio .jp-Notebook-toolbarCellType .jp-Notebook-toolbarCellTypeDropdown option[value="raw"],\n.from-studio .jp-CommandToolbarButton .jp-ToolbarButtonComponent[data-command="docmanager:save"] {\n    display: none !important;\n}\n.from-studio .lm-Menu-item[data-command="notebook:create-console"], \n.from-studio .lm-Menu-item[data-command="inspector:open"],\n.from-studio .lm-Menu-item[data-command="logconsole:open"] {\n    display: none !important;\n}\n.from-studio .lm-TabBar .lm-TabBar-addButton {\n    display: none !important;\n}\n.from-studio {\n    background-color: #fff;\n}',""]);const d=r},646:(e,n,o)=>{o.d(n,{A:()=>l});var t=o(601),i=o.n(t),a=o(314),r=o.n(a),d=o(475),s=r()(i());s.i(d.A),s.push([e.id,"\n",""]);const l=s},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var o="",t=void 0!==n[5];return n[4]&&(o+="@supports (".concat(n[4],") {")),n[2]&&(o+="@media ".concat(n[2]," {")),t&&(o+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),o+=e(n),t&&(o+="}"),n[2]&&(o+="}"),n[4]&&(o+="}"),o})).join("")},n.i=function(e,o,t,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(t)for(var d=0;d<this.length;d++){var s=this[d][0];null!=s&&(r[s]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);t&&r[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),o&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=o):c[2]=o),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),n.push(c))}},n}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var n=[];function o(e){for(var o=-1,t=0;t<n.length;t++)if(n[t].identifier===e){o=t;break}return o}function t(e,t){for(var a={},r=[],d=0;d<e.length;d++){var s=e[d],l=t.base?s[0]+t.base:s[0],c=a[l]||0,u="".concat(l," ").concat(c);a[l]=c+1;var p=o(u),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var f=i(m,t);t.byIndex=d,n.splice(d,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function i(e,n){var o=n.domAPI(n);return o.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;o.update(e=n)}else o.remove()}}e.exports=function(e,i){var a=t(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var d=o(a[r]);n[d].references--}for(var s=t(e,i),l=0;l<a.length;l++){var c=o(a[l]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}a=s}}},659:e=>{var n={};e.exports=function(e,o){var t=function(e){if(void 0===n[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}n[e]=o}return n[e]}(e);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(o)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,o)=>{e.exports=function(e){var n=o.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(o){!function(e,n,o){var t="";o.supports&&(t+="@supports (".concat(o.supports,") {")),o.media&&(t+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(t+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),t+=o.css,i&&(t+="}"),o.media&&(t+="}"),o.supports&&(t+="}");var a=o.sourceMap;a&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(t,e,n.options)}(n,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}}]);