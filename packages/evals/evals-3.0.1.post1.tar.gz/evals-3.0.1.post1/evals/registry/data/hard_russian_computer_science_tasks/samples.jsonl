{"input": [{"role": "system", "content": "Алёна очень любит алгебру. Каждый день, заходя на свой любимый алгебраический форум, она с вероятностью $\\frac14$ находит там новую интересную задачу про группы, а с вероятностью $\\frac{1}{10}$ интересную задачку про кольца. С вероятностью $\\frac{13}{20}$ новых задач на форуме не окажется. Пусть $X$ — это минимальное число дней, за которые у Алёны появится хотя бы одна новая задача про группы и хотя бы одна про кольца. Найдите распределение случайной величины $X$. В ответе должны участвовать только компактные выражения (не содержащие знаков суммирования, многоточий и пр.)."}], "ideal": "Нам нужно найти $ P[X = k] $. Для этого надо понять на пальцах, в каком случае $ X = k $. Первый случай — когда в каждый из предыдущих $ k - 1 $ дней либо не было задач, либо были только про группы, а в $k$-ый попалась задача про кольца. Второй случай — когда в каждый из предыдущих $ k - 1 $ дней либо не было задач, либо были только про кольца, а в $k$-ый попалась задача про группы. На самом деле мы оба раза учли не подходящий случай, когда все предыдущие $k-1$ дней задач не было вообще. С поправкой на это ответ будет таким: $P[x=k]=\\left (\\left (\\frac{13}{20}+\\frac{1}{4}\\right )^{k-1}-\\left (\\frac{13}{20} \\right )^{k-1}\\right )\\cdot\\frac{1}{10}+\\left (\\left (\\frac{13}{20}+\\frac{1}{10}\\right )^{k-1}-\\left (\\frac{13}{20} \\right )^{k-1}\\right )\\cdot\\frac{1}{4}$"}
{"input": [{"role": "system", "content": "В множестве из $n$ человек каждый может знать или не знать другого (если $A$ знает $B$, отсюда не следует, что $B$ знает $A$). Все знакомства заданы булевой матрицей $n×n$. В этом множестве может найтись или не найтись знаменитость — человек, который никого не знает, но которого знают все. Предложите алгоритм, который бы находил в множестве знаменитость или говорил, что ее в этом множестве нет. Сложность по времени — $O(n)$, сложность по памяти — $O(1)$."}], "ideal": "Для определенности положим $K_{ij}=\\left\\{\\begin{matrix}1, \\text{если i-й знает j-ого;} \\\\0\\text{,иначе.}\\end{matrix}\\right.$.\nЗаметим, что если $K_{ij}=1$, то $i$-ый не может быть знаменитостью, а если $K_{ij}=0$, то $j$-ый не может быть знаменитостью. Таким образом, за одну проверку можно исключить одного человека из кандидатов в знаменитости.\nСначала пусть $s=1$, а $l$ пробегает значения от $22$ до $n$. Если в какой-то момент $K_{sl}=1$, то приравниваем $s=l$. Тогда значение $s$ после последней проверки — номер единственного оставшегося кандидата. Чтобы проверить, является ли этот кандидат знаменитостью, нужно провести еще $n−1$ проверок, знают ли его остальные, и $n−1$ проверок, знает ли он остальных. Всего будет проведено $3(n−1)$ проверок, следовательно, сложность по времени — $O(n)$. Поскольку мы использовали только $2$ переменные, сложность по памяти — $O(1)$."}
{"input": [{"role": "system", "content": "В двумерном полукруге есть n неизвестных нам точек. Разрешается задавать вопросы вида «каково расстояние от точки X до ближайшей из этих точек?» Если расстояние оказывается нулевым, точка считается угаданной. Докажите, что хотя бы одну из этих точек можно угадать не более чем за $2n+1$ вопрос."}], "ideal": "Возьмем на диаметре полукруга $n+1$ точку. Точки назовем $A_1$, $A_2$, … $A_{n+1} и для каждой из них зададим наш вопрос. По принципу Дирихле, для каких-то двух соседних точек ближайшая точка будет одна и та же и полученное расстояние было бы до одной и той точки из множества загаданных точек. Теперь мы рассматриваем точки $B+i$ пересечения окружностей с центрами в точках $A_i$ и $A_{i+1}, $i=1, … , n и радиусами равными ответам полученным на предыдущем шаге. По принципу Дирихле, хотя бы одна из загаданных точек совпадает с одной из точек $B_i$. Тогда за n вопросов для каждой точки $B_i$ мы получим хотя бы один ответ 0. Итого нам потребовалось не более (n+1)+n=2n+1 вопросов."}
{"input": [{"role": "system", "content": "В равностороннем треугольнике $ABC$ площади $1$ выбираем точку $M$. Найти математическое ожидание площади $ABM$."}], "ideal": "Заметим, что $M(S_{ABM}+S_{BCM}+S_{CAM})=1$. Тогда из линейности матожидания и равенства матожиданий площадей треугольников $ABM$, $BCM$ и $CAM$ получим $M(S_{ABM})=\\frac{1}{3}$."}
{"input": [{"role": "system", "content": "Верно ли, что всякая нечетная непрерывная функция, \nудовлетворяющая условию $f(2x) = 2f(x)$, линейна."}], "ideal": "Контрпример: $f(x) = x \\cos(2\\pi \\log_2(|x|))$.\nНеверно."}
{"input": [{"role": "system", "content": "Верно ли, что rank AB = rank BA для любых квадратных матриц A и B?"}], "ideal": "Пусть $A=\\begin{pmatrix} 0& 1 \\\\ 1& 0 \\\\ \\end{pmatrix}$, а $B=\\begin{pmatrix} 1& 0 \\\\ 1& 0 \\\\ \\end{pmatrix}$. Тогда rank AB = 0, но rank BA = 1. Неверно."}
{"input": [{"role": "system", "content": "Вычислите $\\int_{0}^{2π}(\\sin x)^8dx$."}], "ideal": "Заметим, что $\\int_{0}^{2\\pi} (\\sin x)^n dx=-\\int_{0}^{2\\pi} (\\sin x)^{n-1} d(\\cos x)=(n-1)\\int_{0}^{2\\pi} (\\cos x)^2(\\sin x)^{n-2} dx$.\nИспользуя основное тригонометрическое тождество, получаем:\n$\\int_{0}^{2\\pi} (\\sin x)^n dx=\\frac{n-1}{n}\\int_{0}^{2\\pi} (\\sin x)^{n-2}dx$.\nТогда $\\int_{0}^{2\\pi} (\\sin x)^8 dx=2\\pi \\prod_{\\substack{k=2\\\\k+=2}}^{8}\\frac{k-1}{k}=\\frac{35\\pi}{64}$."}
{"input": [{"role": "system", "content": "Дан массив из $n$ чисел. Предложите алгоритм, позволяющий за $O(n)$ операций определить, является ли этот массив перестановкой чисел от $1$ до $n$. Дополнительной памяти не более $O(1)$."}], "ideal": "Идея состоит в том, чтобы рассматривать массив $A$ как подстановку. Пусть индекс $i$ пробегает значения от $0$ до $n−1$. Когда мы встречаем положительный элемент $A[i]$, переходим от него к элементу $A[A[i]−1]$, от элемента $A[A[i]−1]$ к элементу $A[A[A[i]−1]−1]$ и так далее, пока мы не не вернемся к $A[i]$, либо не сможем совершить очередной шаг (в таком случае, массив перестановкой не является). В процессе меняем знак всех пройденных элементов на отрицательный. Поскольку на каждом элементе массива мы можем оказаться максимум два раза, итоговая сложность — $O(n)$. Дополнительная память — $O(1)$."}
{"input": [{"role": "system", "content": "Дан неориентированный непустой граф $G$ без петель. Пронумеруем все его вершины. Матрица смежности графа $G$ с конечным числом вершин $n$ (пронумерованных числами от 11 до $n$) — это квадратная матрица $A$ размера $n$, в которой значение элемента $a_{ij}$ равно числу ребер из $i$-й вершины графа в $j$-ю вершину. Докажите, что матрица $A$ имеет отрицательное собственное значение."}], "ideal": "Заметим, что $A$ — симметрическая ненулевая матрица с неотрицательными элементами и нулями на диагонали. Докажем, что у такой матрицы есть отрицательное собственное значение.\nИзвестный факт, что симметрическая матрица диагонализуема в вещественном базисе (все собственные значения вещественны). Допустим, что все собственные значения $A$ неотрицательны. Рассмотрим квадратичную форму $q$ с матрицей $A$ в базисе $\\{e1,…,en\\}$. Тогда эта квадратичная форма неотрицательно определена, так как все собственные значения неотрицательны. То есть $\\forall v:q(v)⩾0$. С другой стороны, пусть $a_{ij}≠0$. Тогда $q(e_i−e_j)=a_{ii}−2a_{ij}+a_{jj}=−2a_{ij}<0$. Это противоречит неотрицательной определенности $q$. Значит, исходное предположение неверно, и у $A$ есть отрицательное собственное значение."}
{"input": [{"role": "system", "content": "Дана матрица из нулей и единиц, причем для каждой строки матрицы верно следующее: если в строке есть единицы, то они все идут подряд (неразрывной группой из единиц). Докажите, что определитель такой матрицы может быть равен только $\\pm1$ или $0$."}], "ideal": "Переставляя строки, мы можем добиться того, чтобы позиции первых (слева) единиц не убывали сверху вниз. При этом определитель либо не изменится, либо поменяет знак. Если у двух строк позиции первых единиц совпадают, то вычтем ту, в которой меньше единиц из той, в которой больше. Определитель при этом не меняется. Такими операциями мы можем добиться того, что позиции первых единиц строго возрастают сверху вниз. При этом либо матрица окажется вырожденной, либо верхнетреугольной с единицами на диагонали. То есть, определитель станет либо $0$, либо $1$. Так как определитель при наших операциях либо не менялся, либо поменял знак, изначальный определитель был $\\pm1$ или $0$."}
{"input": [{"role": "system", "content": "Дано множество A={1,2,…,n}.\nСреди всех его подмножеств равновероятно выбирается k его подмножеств.\nНайдите вероятность того, что $A_1\\cap A_2\\cap \\cdots\\cap A_k=\\oslash$."}], "ideal": "Рассмотрим элемент $i\\in A$.  Очевидно, подмножеств в $A$, содержащих $i$ и не содержащих $i$, равное количество. Таким образом, вероятность того, что $i$ лежит в $A_j$ равна $\\frac{1}{2}$. Эти вероятности независимы для разных $j$. Получаем, что вероятность того, что $i$ содержится в $A_1\\cap A_2\\cap …\\cap A_k$ равна $\\frac{1}{2^k}$. Соответственно, вероятность того, что $i$ не содержится в $A_1\\cap A_2\\cap …\\cap A_k$ равна $1-\\frac{1}{2^k}$. \nЭти вероятности независимы для разных $i$. Получается, что вероятность того, что ни один из номеров $i$ не попал в $A_1\\cap A_2\\cap …\\cap A_k$ равна $(1-\\frac{1}{2^k})^n$."}
{"input": [{"role": "system", "content": "Дано некоторое множество положительных чисел мощности континуум. Докажите, что из него можно выбрать счетное подмножество с бесконечной суммой."}], "ideal": "Покроем данное множество $M$ счетным числом подмножеств:\\[M=\\bigcup_{n=1}^{\\infty}\\left ( M\\cap \\left [ \\frac{1}{n};\\infty \\right ) \\right )\\]\nЗаметим, что хотя бы одно такое подмножество $A_N=M\\cap \\left [ \\frac{1}{n};\\infty \\right )$ должно иметь мощность континуум, поскольку в противном случае множество $M$ счетно как объединение счетного числа счетных множеств. Но в таком множестве будет континуум элементов, которые больше (или равны) некоторого числа $\\frac{1}{N}$. А значит, любое счетное подмножество $A_N$ будет с бесконечной суммой."}
{"input": [{"role": "system", "content": "Даны 2012 гирек разной массы. Они разбиты на две группы (по 1006 в каждой), внутри которых упорядочены по массе. Предложите способ за 11 взвешиваний найти 1006-ю гирьку по массе среди всех."}], "ideal": "Сравним массы 503-их по массе гирек в этих группах. Пусть, для определенности, $a_{503}>b_{503}$. Тогда гирьки, которые легче $b_{503}$ в ее группе (+ сама $b_{503}$) и тяжелее $a_{503}$ в ее группе не могут быть 1006-ми по массе, поэтому выкидываем их из групп. В результате такого шага у нас остались две группы по $503$ гирьки. Продолжая аналогичные рассуждения (в случае нечетного числа гирек в группе легкую при сравнении не выкидываем), за $10$ шагов у нас останется по одной гирьке в каждой группе и та, которая легче, и будет искомой."}
{"input": [{"role": "system", "content": "Есть круговая трасса, на которой в некоторых местах стоят бензоколонки. Расстояние между ними и количество бензина на каждой бензоколонке известны. Имеется также машина с постоянным и известным расходом топлива. Предложите алгоритм, работающий за  O(n) по времени, который позволяет найти ту бензоколонку, начиная с которой можно проехать всю трассу, или сказать, что такой нет."}], "ideal": "Пронумеруем бензоколонки по порядку начиная с произвольной. Пусть теперь $g{i]$ — изменение количества топлива после заправки в i-ой бензоколонки и прохождения дороги после нее. Тогда если  $\\sum_{i=1}^{n}g[i]<0$ такой бензоколонки нет, поскольку в таком случае количество топлива в бензоколонках меньше, чем требуется для прохождения всех дорог. \nПокажем, что если $\\sum_{i=1}^{n}g[i]\\geqslant 0 $, такая бензоколонка существует всегда. Рассмотрим частичные суммы $h[k]=\\sum_{i=1}^{k}g[i]$. Пусть минимальная частичная сумма достигается в индексе $j$  и равна $h[j]$. Тогда если $h [j]\\geqslant 0$, то задача решена. Если же нет — начнем движение с бензоколонки, следующей за $j$. В таком случае частичные суммы всегда неотрицательны, поскольку в противном случае $j$  не был элементом, в котором достигается минимальная частичная сумма. Сложность по времени — O(n)."}
{"input": [{"role": "system", "content": "Есть неизвестная нам квадратичная форма $Q$ в $n$-мерном пространстве. Разрешается задавать вопрос вида «Чему равно $Q(v)$?». Какое минимальное число вопросов надо задать, чтобы определить, является ли форма $Q$  положительно определенной?"}], "ideal": "Пусть квадратичная форма записана в базисе $e_1,e_2,…e_n$. Понятно, что если ответ на какой-то вопрос будет неположительным, то форма не положительно определенная. Задав $\\frac{n(n+1)}{2}$ вопросов, можно найти все коэффициенты (например, сначала находим диагональные, затем все остальные) и определить, является ли форма положительно определенная. Докажем, что за меньшее число вопросов сделать мы этого не сможем.\nКаждый вопрос дает нам линейное уравнение на коэффициенты. Если мы задали вопросов меньше, чем число коэффициентов, какие-то коэффициенты будет неопределены. Пусть неопределен диагональный коэффициент $a_{jj}$. Тогда ответ на вопрос $Q(e_j)=a_{jj}$ может быть отрицательным, а значит мы не можем быть уверены в положительной определенности. Пусть теперь все диагональные коэффициенты известны и положительны, а некоторый недиагональный коэффициент $a_{ij}$ неопределен. Тогда ответ на вопрос $Q(e_i+e_j)=a_{ii}+a_{ij}+a_{jj}$ может быть отрицательным."}
{"input": [{"role": "system", "content": "Задана битовая матрица $n×n$ с элементами $0$ и $1$ (каждый элемент матрицы занимает один бит памяти). Назовем строку (столбец) исходной матрицы плохой (плохим), если в нем встречается хотя бы один ноль. Необходимо в исходной матрице занулить все плохие строки и столбцы. Предложите алгоритм, решающий эту задачу за $O(1)$ дополнительной памяти и оцените его временную стоимость."}], "ideal": "1) Посмотрим на первую строку и первый столбец матрицы. Запомним, хорошие они или плохие. На это потребуется O(n) времени и 2 бита дополнительной памяти.\n2) Пройдемся по оставшейся части матрицы $i=2…n$, $j=2…n$. Если $a_{ij}=0$, занулим $a_{i1}$ и $a_{1j}$. Таким образом, в первой строке (столбце) будут стоять единицы, если вся строка (столбец) хорошие и наоборот. Этот шаг занимает $O(n^2)$ по времени, дополнительной памяти не требуется.\n3) Пройдемся по этой же матрице еще раз. Если $a_{i1}=0$ либо $a_{1j}=0$, занулим $a_{ij}$. В результате этих манипуляций мы выполнили условия задачи для всей матрицы, кроме, возможно, первой строки (столбца). Этот шаг также занимает $O(n^2)$ по времени.\n4) Используя результат пункта 1, приведем первую строку (столбец) в соответствии с условиями задачи. Это займет $O(n)$ по времени.\nТаким образом, мы решили задачу за $O(n^2)$ по времени и за $O(1)$ дополнительной памяти."}
{"input": [{"role": "system", "content": "Заполните третий столбец матрицы \\section{Задача}\n$1/6 *\\begin{pmatrix}\n5 & -2 & x \\\\\n-2 & 2 & y \\\\\n-1 & -2 & z\n\\end{pmatrix}$, если известно, что это матрица ортогональной проекции на некоторую плоскость."}], "ideal": "Назовём эту матрицу $A$ и воспользуемся свойством ортогональных проекторов\n$A^2=A$:\n$ A^{2}=1/36\\begin{pmatrix}\n5& -2& x\\\\\n-2& 2& y\\\\\n -1& -2& z\\\\\n\\end{pmatrix}\\begin{pmatrix}\n5& -2& x\\\\\n-2& 2& y\\\\\n -1& -2& z\\\\\n\\end{pmatrix}=\n1/36\\begin{pmatrix}\n29-x& *& *\\\\\n-14-y& *& *\\\\\n -1-z& *& *\\\\\n\\end{pmatrix}=1/6\\begin{pmatrix}\n5& -2& x\\\\\n-2& 2& y\\\\\n -1& -2& z\\\\\n\\end{pmatrix}=A$\nНам необязательно считать 2 и 3 столбец, информации в первом достаточно для решения.\n\nПолучаем тривиальную систему:\n\\left\\{\\begin{matrix}\n29-x=5 * 6\\\\\n -14-y=-2*6\\\\\n-1-z=-1*6\n\\end{matrix}\\right. \\Leftrightarrow \n\\left\\{\\begin{matrix}\n29-x=30\\\\\n -14-y=-12\\\\\n-1-z=-6\n\\end{matrix}\\right.\\Leftrightarrow \n\\left\\{\\begin{matrix}\nx=-1\\\\\ny=-2\\\\\nz=5\n\\end{matrix}\\right.\n\nТаким образом, мы заполнили 3 столбец, получив в итоге матрицу\n$A=1/6\\begin{pmatrix}\n5& -2& -1\\\\\n-2& 2& -2\\\\\n -1& -2& 5\\\\\n\\end{pmatrix}$"}
{"input": [{"role": "system", "content": "Игральную кость с n гранями (и числами от 1 до n на этих гранях) подбрасывают до тех пор, пока сумма выпавших очков не станет больше либо равна n. Все грани кости выпадают с одинаковой вероятностью. Найдите математическое ожидание числа бросков."}], "ideal": "Обозначим через M(k) математическое ожидание числа бросков, требуемых для получения суммы, большей или равной n, при условии, что в начальный момент сумма была равна k.\nТогда имеем\n$M(n)=0,M(n−1)=1,M(n−2)=1+\\frac{1}{n}M(n−1)=1+\\frac{1}{n}$,\n$M(n−3)=1+\\frac{1}{n}M(n−2)+\\frac{1}{n}M(n−1)=1+\\frac{2}{n}+\\frac{1}{n^2}$ , \n$M(n−4)=1+\\frac{1}{n}M(n−3)+\\frac{1}{n}M(n−2)+\\frac{1}{n}M(n−1)=1+\\frac{3}{n}+\\frac{3}{n^2}+\\frac{1}{n^3}$.\nВозникает гипотеза о том, что $M(n−k)=\\sum_{i=1}^{k-1}C^i_{k−1}\\frac{1}{n^i}$, которая проверяется при помощи индукции.\nИскомое математическое ожидание равно $M(0)=\\sum_{i=1}^{n-1}C^i_{n−1}\\frac{1}{n^i}=\\left ( 1+\\frac{1}{n} \\right )^{n-1}$."}
{"input": [{"role": "system", "content": "Имеется $100$ некоторых подмножеств множества ${0,1,…,9}$. Докажите, что среди них найдется два подмножества, у которых симметрическая разность имеет мощность не более двух."}], "ideal": "Будем решать задачу от противного. Предположим, что у любой пары подмножеств из условия мощность симметрической разности больше двух. Возьмем тогда некоторую пару различных подмножеств $A$ и $B$. Назовем $f(A)$ и $f(B)$ все возможные подмножества, у которых мощность симметрической разности с ними равна одному (эти подмножества не входят в $100$). Ясно, что $|f(A)|=|f(B)|=10$. Докажем, что $f(A)$ и $f(B)$ не пересекаются. В самом деле, пусть есть некоторое подмножество $C$, которое принадлежит $f(A)$ и $f(B)$ одновременно, то есть $|C△A|=1$ и $|C△B|=1|$. Но тогда $|A△B|=2$, чего быть не может. Далее, поскольку для любой пары множеств $f(A)$ и $f(B)$ не пересекаются, то каждому множеству (из $100$) можно поставить в соответствие $10$ других множеств (не из $100$). Таким образом, общее число подмножеств должно быть как минимум $11×100=1100$. Но у нас есть только $2^{10}=1024$ подмножества.\nПримечание. Данное решение можно сформулировать более красиво, если рассмотреть представления подмножеств в 10-мерном бинарном пространстве $\\{0,1\\}10$, где стоит $1$ если элемент принадлежит подмножеству и $0$ в противном случае. Расстоянием между элементами пространства назовем расстояние Хэмминга, то есть число позиций, в которых соответствующие символы различны. Тогда единичная сфера в таком пространстве состоит из $10$ точек, а если мы поместим в это пространство $100$ точек, какие-то две сферы вокруг них должны пересечься. Центры таких сфер соответствуют подмножествам, у которых симметрическая разность имеет мощность не более двух."}
{"input": [{"role": "system", "content": "Какую наибольшую дисперсию может иметь случайная величина, принимающая значения на отрезке от 0 до 1?"}], "ideal": "$Dx=\\int_{0}^{1}x^2dF(x)−(\\int_{0}^{1}xdF(x))^2≤\\int_{0}^{1}xdF(x)−(\\int_{0}^{1}xdF(x))^2=z−z^2≤\\frac{1}{4}$, где $F(x)$ — произвольная монотонная функция распределения, а интегралы берутся в смысле Римана-Стилтьеса. Очевидно, что неравенство превращается в равенство в случае, если $F(x)$ описывает распределение Бернулли с параметром $\\frac{1}{2}$. "}
{"input": [{"role": "system", "content": "Квадратная матрица A размера 9×9 над полем характеристики, отличной от 2, такова, что $A^{2}=E$. Найдите ранг матрицы E−A, если известно, что ранг матрицы E+A равен 7."}], "ideal": "Так как $A^2=E$, матрица A диагонализуема, причем на диагонали стоят числа 1 и −1. Так как $rank(E+A)=7$ и $char K ≠2$, мы заключаем, что −1 встречается 2 раза, а 1 встречается 7 раз. Тогда $rank(E−A)=2$."}
{"input": [{"role": "system", "content": "Квадратная матрица n×n заполнена различными натуральными числами. Предложите алгоритм, находящий два элемента этой матрицы, не лежащих ни в одной строке, ни в одном столбце, с максимально возможным произведением. Ограничение по времени — $O(n^2)$, по памяти — O(n)."}], "ideal": "За $O(n^2)$ находим максимум a и второй максимум b в матрице. Если полученные элементы не лежат в одной строке или столбце, то задача решена. Если же лежат — находим максимальный элемент c из тех элементов, которые не лежат в той строке/столбце, которая общая для a и b. Тогда если c не лежит в строке/столбце с a, то ac будет искомым максимальным произведением. Если лежит — то находим максимум d среди тех элементов, которые не лежат в той строке/столбце, которая общая для a и b и не лежат в одной строке/столбце с a. Тогда либо bc, либо ad будет искомым максимальным произведением."}
{"input": [{"role": "system", "content": "На окружности выбираются 3 случайных точки. С какой вероятностью центр окружности лежит внутри треугольника с вершинами в этих точках?"}], "ideal": "Пусть $x_1$, $x_2$, $x_3$ — три точки на окружности. С вероятностью 1 найдется единственная пара чисел $t_2$, $t_3$, такая, что $x_1+t_2x_2+t_3x_3=0$. Легко убедится, что искомая вероятность совпадает с вероятностью $P(t_2,t_3>0)$. Рассмотрим события $A_1={t_2,t_3>0}$, $A_2={t_2>0,t_3<0}$, $A_3{t_2<0,t_3>0}$, $A_4{t_2,t_3<0}$. Так как эти события равновероятны, несовместны и их объединение имеет вероятность 1, заключаем, что вероятность каждого из них равна $\\frac{1}{4}$."}
{"input": [{"role": "system", "content": "Назовем элемент прямоугольной матрицы седлом, если он является наибольшим в своей строке и наименьшим в своем столбце или наоборот. Придумайте алгоритм, за $O(nm)$ операций находящий все седла в матрице $A[1..n][1..m]$, использующий не более $O(n+m)$ памяти и не более 1 раза обращающийся к каждому элементу A (можете считать, что элемент $A[i][j]$ превращается в NaN сразу после вызова $A[i][j]$). Считайте, что все элементы матрицы различны"}], "ideal": "Будем обходить все элементы матрицы по очереди   и будем хранить максимальный и минимальный элемент для каждой строки и для каждого столбца:\n\n1.  M^{i} максимальный элемент в  i-ом  столбце\n2.  m^{i} минимальный элемент в i-ом столбце,\n3. M_{i} максимальный элемент в i-ой строке\n4. m_{i} минимальный элемент в i-ой строке.\n\nДля этого нам понадобится $2(n+m)+1$ памяти и $4nm$ сравнений. Заметим, что элемент $x$ является седлом\nтогда и только тогда, когда $x$ встречается в $M_{i}$ и $m^{j}$ или в $m_{i}$ и $M^{j}$ для некоторых $i,j$.\nТеперь нужно пройти по двум массивам $M_{i}$ и $m_{i}$ и проверить каждый элемент встречается ли он в $m^{j}$ или в $M^{j}$. Для этого требуется $2nm$ сравнений.\n\nЛегко видеть, что общее число операций оценивается как $O(nm)$ и необходимая память ограничена $O(n+m)$.\nТем самым искомый алгоритм построен."}
{"input": [{"role": "system", "content": "Найдите математическое ожидание числа неподвижных точек для случайной перестановки на n элементах."}], "ideal": "Рассмотрим индикаторные случайные величины:\n$X_{i}=\\left\\{\\begin{matrix} 1\\text{, если }\\sigma_{i}=i, \\\\ 0\\text{, иначе} \\end{matrix}\\right.$\nТогда число X неподвижных точек подстановки  $σ$  равно сумме $X_{1}+X_{2}+\\cdots +X_{n}$\nНайдем математическое ожидание каждого из слагаемых: \n$M(X_{1})=0\\cdot P(X_{1}=0)+1\\cdot P(X_{1}=1)=P(X_{1}=1)=P(\\sigma_{1}=i)=\\frac{1}{n}$.\nВ самом деле, элемент $i$ фиксирует (n−1)! перестановок.\nТеперь воспользуемся линейностью матожидания:\n$M(X)=M(X_{1}+X_{2}+\\cdots +X_{n})=M(X_{1})+M(X_{2})+\\cdots +M(X_{n})=n\\cdot\\frac{1}{n}=1$"}
{"input": [{"role": "system", "content": "Найдите предел $\\displaystyle \\lim_{\\lambda \\to 0+} \\frac{1}{ln \\lambda}\\int_{\\lambda}^{a} \\frac{cos x}{x} dx$"}], "ideal": "Разобьем интеграл на слагаемые: $\\displaystyle \\int_{\\lambda}^{a} \\frac{cos x}{x} dx=\\int_{\\lambda}^{a}\\frac{1}{x}dx+\\int_{\\lambda}^{a}\\frac{cos x-1}{x}dx$.\nДля первого слагаемого имеем:\n$\\displaystyle \\lim_{\\lambda \\to 0+} \\frac{1}{ln \\lambda}\\int_{\\lambda}^{a} \\frac{1}{x} dx= -1$\nДля второго слагаемого:\n$\\displaystyle \\left| \\int_{\\lambda}^{a} \\frac{cos x-1}{x} dx\n\\right|\\leqslant \\left|\\int_{0}^{a} \\frac{cos x-1}{x} dx\n \\right|$\nПодынтегральная функция непрерывна в нуле (так как $cos x − 1 = O (x^2)), поэтому интеграл конечен, откуда получаем:\n$\\displaystyle \\lim_{\\lambda \\to 0+} \\frac{1}{ln \\lambda}\\int_{\\lambda}^{a} \\frac{cos x-1}{x} dx=0$.\nПоскольку оба предела существуют и конечны, предел суммы равен −1."}
{"input": [{"role": "system", "content": "Определим последовательность $\\begin{Bmatrix} x_{n} \\end{Bmatrix}$  начальными условиями $x_{1}=a, x_{2}=b$  и рекуррентной формулой $x_{n+1}=\\frac{1}{2}(x_{n}+x_{n+1})$. Найдите \\lim\\limits_{n \\to \\infty} x_{n}"}], "ideal": "Будем искать решение в виде $x_{n}=\\lambda^n$. Тогда $\\lambda^{n+1}=\\frac{1}{2}(\\lambda^n+\\lambda^{n-1})$. Поделив на $\\lambda^{n-1}$ получим $\\lambda^2=\\frac{1}{2}(\\lambda+1)\\Leftrightarrow (\\lambda-1)(\\lambda+\\frac{1}{2})=0$.\nТаким образом, мы нашли решения $x_{n}=1$ и $x_{n}=(-\\frac{1}{2})^n$. Из линейности рекуррентного соотношения общее решение можно записать в виде $x_{n}=C_{1}+C_{2}(-\\frac{1}{2})^n$.\nПодставим начальные условия $x_{1}=a, x_{2}=b$. Тогда $x_{n}=\\frac{1}{3}(a+2b)+\\frac{4}{3}(b-a)(-\\frac{1}{2})^n$.\nПереходя к пределу $n\\to \\infty$, получаем $\\frac{1}{3}(a+2b)$."}
{"input": [{"role": "system", "content": "Последовательность $\\begin{Bmatrix}a_n\\end{Bmatrix}^{\\infty}_{n=0}$ определена рекурсивно:\n$a_0=1$, $a_{n+1}=\\frac{a_{n}}{1+na_n}$.\nНайдите формулу общего члена последовательности."}], "ideal": "Введем обозначение $b_n=\\frac{1}{a^n}$. Тогда $b_{n+1}=\\frac{1+na_n}{a_n}=b_n+n$.\nКроме того, $b_0=\\frac{1}{a_0}=1$.\nПолучаем, что $b_n=b_0+1+2+\\cdots+n−1=1+\\frac{n(n−1)}{2}=\\frac{n(n−1)+2}{2}$.\nОтсюда получаем $a_n=\\frac{2}{n(n−1)+2}$."}
{"input": [{"role": "system", "content": "Пусть $A$ — квадратная матрица $n \\times n$. \nДокажите, что $n-{rk} A \\geqslant {rk} A-{rk} A^{2}$"}], "ideal": "Обозначим $\\mathcal{A}$ оператор с матрицей $A$. Напомним, что ${Im}(\\mathcal{A})$ обозначает образ оператора, ${Ker}(\\mathcal{A})$ — ядро.\n\nОпределим оператор $\\tilde{A}$, действующий на $\\operatorname{Im}(\\mathcal{A})$ как ограничение оператора $\\mathcal{A}$ на это подпространство.\n\nТогда, имеем очевидные равенства\n${Im}(\\tilde{\\mathcal{A}})={Im}\\left(\\mathcal{A}^{2}\\right), \\quad {Ker}(\\tilde{\\mathcal{A}})={Ker}(\\mathcal{A}) \\cap {Im}(\\mathcal{A}).$\n\nПоэтому получаем:\n${rk} A-{rk} A^{2}={dim}({Im}(\\mathcal{A}))-{dim}({Im}(\\tilde{\\mathcal{A}}))={dim}({Ker}(\\tilde{\\mathcal{A}})) \\leqslant {dim}({Ker}(\\mathcal{A}))=n-{rk} A.$\n\nМы использовали то, что для любого линейного оператора L, действующего на векторном пространстве V, справедлива формула:\n${dim}({Im}(\\mathcal{L}))+{dim}({Ker}(\\mathcal{L}))={dim} V.$."}
{"input": [{"role": "system", "content": "Пусть $A$ и $B$ — ортогональные матрицы (не ортогональные друг другу, а просто ортогональные!). Докажите, что\n\n$\\det(A^TB - B^TA) =\\det(A+B)\\cdot \\det(A-B)$"}], "ideal": "Имеем равенства:\n$\\det(A+B)\\cdot \\det(A-B) = \\det(A-B)\\cdot \\det(A+B) = \n\n= \\det(A^T-B^T)\\cdot \\det(A+B) =\n\n=\\det((A^T-B^T)(A+B)) = \\det(A^TA+A^TB-B^TA-B^TB) = \n\n= \\det(A^TB - B^TA)$.\n\nВ последнем равенстве мы использовали то, что для ортогональной матрицы $X$ выполняется соотношение $X^TX = E$, где $E$ — единичная матрица. Также мы воспользовались известными формулами :\n$\\det A^T = \\det A,\\quad \\det(AB) = \\det(BA)$."}
{"input": [{"role": "system", "content": "Пусть $A1,A2,…,An$ — конечные множества и $a_{ij}=|A_i∩A_j|$. Докажите, что матрица $(a_{ij})^{j=1,2,…,n}_{i=1,2,…,n}$ неотрицательно определена."}], "ideal": "Рассмотрим все возможные элементы $x∈A_1∪A_2∪⋯∪A_n$. Для каждого из этих элементов построим матрицу $B_x$ следующим образом:\\[(B_x)_{ij}=\\left\\{\\begin{matrix}1, \\text{если } x∈A_i∩A_j;\\\\0\\text{, иначе.}\\end{matrix}\\right.\\]\nВ таком случае матрица $a$ будет являться суммой всех матриц $B_x$.\n\\textbf{Лемма}. Определитель всех главных миноров $B_x$ равен 0 либо 1.\n\\textbf{Доказательство}. Заметим, что если элемент $x$ не содержится в некотором множестве $A_k$, то $k$-ая строка и $k$-й столбец матрицы $B_x$ будут состоять из нулей. Ненулевые же строки и столбцы матрицы $B_x$ одинаковы. Пусть в главном миноре на некотором месте стоит $0$. Но тогда в этом миноре есть строка или столбец полностью состоящие из нулей, тогда определитель такого минора равен нулю. Если же нулей нет, такой минор состоит полностью из единиц. Для минора размером $1×1$ определитель равен единице, для всех же остальных миноров из единиц он равен нулю, поскольку их строки/столбцы линейно зависимы. Лемма доказана.\nПоскольку определитель всех главных миноров неотрицателен, в соответствии с критерием Сильвестра неотрицательно определена и сама матрица $B_x$. Но тогда и матрица $a$ неотрицательно определена как сумма неотрицательно определенных матриц."}
{"input": [{"role": "system", "content": "Пусть $f$ — положительная непрерывная функция на $\\mathbb{R}$, причем $\\int_{-\\infty}^{\\infty}f(x)dx=1$. Пусть $α∈(0,1)$, а интервал $[a;b]$ — это интервал минимальной длины из тех, для которых $\\int_{a}^{b}f(x)dx=α$. Верно ли, что $f(a)=f(b)$."}], "ideal": "Рассмотрим функцию $F(t)=\\int_{a+t}^{b+t}f(x)dx$. Если $f(a)≠f(b)$, $F(t)$ будет строго монотонной в окрестности $t=0$. Тогда существует такое $Δt$, что $F(Δt)>F(0)$. В таком случае мы можем уменьшить длину промежутка $[a+Δt;b+Δt]$ и получить $α$, а значит, интервал $[a;b]$ был не минимальным.\nВерно."}
{"input": [{"role": "system", "content": "Пусть $M\\subseteq \\mathbb{R}$ — множество из $n$ элементов. Пусть, далее, $S_M=\\begin{Bmatrix} \\frac{(x+y)}{2}|x,y\\in M, x\\neq y \\end{Bmatrix}$. Найдите наименьшую возможную мощность множества $S_M$ (одинаковые элементы множества считаются одним элементом)."}], "ideal": "Пусть  $x_1<x_2<\\cdots <x_n$ — элементы множества M. Тогда $\\frac{x_1+x_2}{2}<\\frac{x_1+x_3}{2} <\\cdots <\\frac{x_1+x_n}{2}<\\frac{x_2+x_n}{2}<\\frac{x_3+x_n}{2}<\\cdots <\\frac{x_{n-1}+x_n}{2}$ суть различные элементы множества $S_M$ в количестве $2n-3$.\nЧтобы убедиться, что оценка точна, достаточно рассмотреть множество M={1,2,…,n}.\nНаименьшую возможную мощность множества $S_M$: $2n-3$"}
{"input": [{"role": "system", "content": "Пусть A и B — квадратичные матрицы размера 2×2. Рассмотрим линейный оператор F на пространстве матриц 2×2, действующий по правилу $F(M)=A\\cdot M\\cdot B\\cdot$.\nМатрица A имеет 2 различных собственных значения $\\lambda_1$ и $\\lambda_2$, а B — 2 различных собственных значения $\\mu_1$ и $\\mu_2$. Найдите собственные значения оператора F, если (а) матрицы A и B — диагональные; (б) матрицы A и B — произвольные."}], "ideal": "(а) Собственными векторами являются матричные единицы.\n(б) Пусть v — собственный вектор матрицы A с собственным значением λ, а u — собственный вектор матрицы $B^T$ с собственным значением μ. Матрица $B^T$  имеет те же собственные векторы, что и B. Тогда матрица $vu^T$ будет собственным вектором оператора F с собственным значением λμ."}
{"input": [{"role": "system", "content": "Рассмотрим бесконечный двумерный массив ${a_{ij}}^∞_{i,j=1}$, состоящий из натуральных чисел, причем каждое число встречается в массиве ровно 88 раз. Докажите, что $∃(m,n):a_{mn}>mn$."}], "ideal": "Допустим, что $∀(m,n):a_{mn}⩽mn$. Выберем некоторое $k∈\\mathbb{N}$ и рассмотрим кривую на плоскости $y=\\frac{1}{k}x$. Если $i,j∈\\mathbb{N}$ и точка $(i,j)$ лежит под кривой $y=\\frac{1}{k}$, то $a_{ij}⩽ij⩽i⋅\\frac{k}{i}=k$. Таким образом, количество целых точек под кривой $y=\\frac{1}{k}x$ должно быть не больше $8k$. С другой стороны, количество целых точек под этой кривой не меньше, чем $\\int_{2}^{k}\\frac{kdx}{x}=k\\ln{x}|^k_2=k(\\ln{k}−ln{2})$. При достаточно большом $k$ это число больше $8k$. Таким образом, мы получаем противоречие. Следовательно, найдется пара $(m,n)$ такая, что $a_{mn}>mn$."}
{"input": [{"role": "system", "content": "Рассмотрим всевозможные непустые подмножества множества ${1,2,3,…,n}$. В каждом подмножестве перемножим числа, обратные его элементам. Потом сложим полученное $2^n−1$ число. Найдите полученную сумму."}], "ideal": "Заметим, что такая сумма равна \\[\\left ( 1+\\frac{1}{1} \\right )\\left ( 1+\\frac{1}{2} \\right )⋯\\left ( 1+\\frac{1}{n} \\right )-1.\\]\nВ самом деле, в результате раскрытия скобок мы получим все возможные комбинации произведений обратных элементов. Приведем слагаемые в скобках к общему знаменателю. Тогда \\[\\frac{2}{1}\\frac{3}{2}⋯\\frac{n+1}{n}-1=n+1−1=n.\\]"}
{"input": [{"role": "system", "content": "Рассмотрим случайную перестановку на $n$ элементах. Докажите, что данные $k$ элементов окажутся в одном цикле с вероятностью $\\frac{1}{k}$."}], "ideal": "Будем генерировать случайную подстановку немного нестандартным образом. Сначала равновероятно выберем случайную перестановку, а затем сопоставим ей циклы, заканчивающиеся на элементах в порядке тривиальной перестановки. Например, для перестановок из $9$ элементов\n\\[\\begin{array}{c}172598346→(1)(72)(5983)(4)(6) \\\\ \n592613478→(59261)(3)(4)(7)(8)\\\\\n641982735→(641)(982)(73)(5)\\end{array}\\]\nРассмотрим самый правый элемент из элементов под номерами $1…$k в такой записи. Любой из этих элементов может с одинаковой вероятностью быть самым правым. Чтобы данные $k$ элементов лежали в одном цикле, самым правым из них может быть только элемент под номером $1$. Поэтому искомая вероятность равна $1/k$."}
{"input": [{"role": "system", "content": "Сколько способов пройти из $(0,0,0)$ в $(n,2n,3n)$, если можно делать шаги на +1 по любой из осей?"}], "ideal": "Число способов разбить множество из $6n$ элементов на множества из $n$, $2n$ и $3n$ элементов равно мультиномиальному коэффициенту $\\frac{(6n)!}{n!(2n)!(3n)!}$."}
{"input": [{"role": "system", "content": "У линейного преобразования n-мерного пространства существуют n+1 собственных векторов, таких, что любые \nn из них линейно независимы. Найдите всевозможные матрицы, которые могли бы задавать такое преобразование."}], "ideal": "Понятно, что число линейно независимых собственных векторов, принадлежащих некоторому собственному значению (геометрическая кратность), равно алгебраической кратности этого собственного значения (поскольку есть $n$ линейно независимых собственных векторов, а геометрическая кратность не превышает алгебраическую). Тогда, при распределении $n+1$ вектора по $n$ собственным значениям, некоторому собственному значению $λ$ достанется на $1$ вектор больше, чем его геометрическая кратность. Пусть теперь есть собственное значение $κ≠λ$. Тогда возьмем $n$ векторов, кроме одного вектора из $κ$. В таком случае эти вектора будут линейно зависимы — противоречие. Это означает, что все собственные значения оператора равны λ.Таким образом, любой вектор из собственного подпространства, при действии на него оператора, растягивается в $λ$ раз. Но поскольку из собственных векторов можно составить базис, любой другой вектор пространства, при действии на него оператора, также будет растягиваться в $λ$ раз. Нетрудно понять, что матрица такого оператора должна быть скалярной. В самом деле, при умножении матрицы на вектора вида $(0,…1…,0)^T$, мы должны получить вектора вида $(0,…λ…,0)^T$. Значит, все элементы на диагонали матрицы равны $λ$. Если же теперь для некоторых $i≠j$ $a_{ij}≠0$, то легко подобрать вектор, который уже не растянется в $λ$ раз.В качестве примера для любой скалярной матрицы можно взять все возможные вектора вида $(0,…1…,0)^T$ и вектор $(1,…1…,1)^T$."}
{"input": [{"role": "system", "content": "Улоф Пальме и Рави Шанкар подбрасывают правильную монетку (вероятность выпадения орла 0.5). Улоф подбрасывает ее n раз, а Рави — n+1. Найдите вероятность того, что у Рави будет больше орлов, чем у Улофа."}], "ideal": "Пусть Улоф и Рави кинули монетку по n раз. Обозначим вероятности возможных событий следующим образом:\n1. У Рави выпало больше орлов, чем у Улофа — p\n2. У Улофа выпало больше орлов, чем у Рави — p\n\n3. У Рави и Улофа одинаковое количество орлов — 1−2p\n\nЕсть только два возможных случая, в которых у Рави, после того как он подбросил монетку в (n+1)-й раз, орлов будет больше, чем у Улофа:\n1. У Рави было больше орлов, чем у Улофа, и после (n+1)-го броска соотношение не поменялось — p\n\n2. У Рави и Улофа было одинаковое количество орлов и в (n+1)-й бросок выпал орел — $\\frac{1}{2}(1-2p)$\n\nПоскольку два последних события несовместны, искомая вероятность равна \n$p+\\frac{1}{2}(1-2p)=\\frac{1}{2}.$"}
