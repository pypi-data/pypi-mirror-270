"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{84022:function(e,n,t){t.d(n,{C:function(){return RepoFilterButton}});var r=t(58467),i=t(52322),o=t(10952),s=t(18399),a=t(9001),l=t(67486),c=t(2784),u=t(75690),d=t(46988),RepoFilterButton=function(){var e=(0,c.useContext)(d.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,v=(0,r._)((0,c.useState)(!1),2),f=v[0],p=v[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:f,style:{width:"auto"},onClose:function(){return p(!1)},children:[(0,i.jsx)(o.fK,{icon:"repo",label:"Filter code locations"}),(0,i.jsx)(u.e,{options:n,onBrowse:function(){return p(!1)},onToggle:h,selected:t}),(0,i.jsx)(o.cN,{children:(0,i.jsx)(s.x,{padding:{top:8},children:(0,i.jsx)(a.zx,{intent:"none",onClick:function(){return p(!1)},children:"Done"})})})]}),(0,i.jsx)(a.zx,{outlined:!0,icon:(0,i.jsx)(l.JO,{name:"folder"}),rightIcon:(0,i.jsx)(l.JO,{name:"expand_more"}),onClick:function(){return p(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},9445:function(e,n,t){t.d(n,{e:function(){return JobsPageContent}});var r=t(58467),i=t(73235),o=t(52322),s=t(40794),a=t(60138),l=t(18399),c=t(63832),u=t(25195),d=t(92364),h=t(34822),v=t(25557),f=t(2784),p=t(91195),x=t(55237),m=t(35157),j=t(71277),g=t(84022),y=t(43180),w=t(57830),b=t(88510),O=t(68884),C=t(55658),k=t(77277),_=t(42885),R=t(9901),T=t(41256),A=t(44254),OverviewJobsTable=function(e){var n=e.repos,t=(0,f.useRef)(null),r=(0,f.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,A.Uz)(n)})},[n]),i=(0,_.N)(O.y,r),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=(0,f.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var i=(0,A.Uz)(t);s.includes(i)&&r.forEach(function(n){var r=n.isJob,i=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:i})})}),e},[n,s]),u=(0,k.w)(n.map(function(e){return e.repoAddress.name})),d=(0,b.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),h=d.getTotalSize(),v=d.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.I,{}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(C.W2,{ref:t,children:(0,o.jsx)(C.Nh,{$totalHeight:h,children:v.map(function(e){var n=e.index,t=e.key,r=e.size,i=e.start,d=c[n];return"header"===d.type?(0,o.jsx)(T.vG,{repoAddress:d.repoAddress,height:r,start:i,onToggle:a,onToggleAll:l,expanded:s.includes((0,A.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,o.jsx)(y.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,o.jsx)(w.V,{children:d.jobCount})})},t):(0,o.jsx)(R.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:r,start:i},t)})})})})]})},S=t(44392),N=t(89191),L=t(58298),E=t(46988),I=t(37160);function _templateObject(){var e=(0,i._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobsPageContent=function(){var e=(0,f.useContext)(E.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,a=(0,r._)((0,j.q)({queryKey:"search",defaults:{search:""}}),2),p=a[0],m=a[1],y=n.length,w=(0,s.a)(z,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),b=w.data,O=w.loading,C=(0,x.C4)(w,x.dT),k=(0,f.useMemo)(function(){var e=(0,N.S)(t);return buildBuckets(b).filter(function(n){var t=n.repoAddress;return e.has((0,A.Uz)(t))})},[b,t]),_=p.trim().toLocaleLowerCase(),R=_.length>0,T=(0,f.useMemo)(function(){var e=_.toLocaleLowerCase();return k.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[k,_]),S=i&&!y||O&&!b;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,o.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[y>1?(0,o.jsx)(g.C,{}):null,(0,o.jsx)(h.oi,{icon:"search",value:p,rightElement:S?(0,o.jsx)(L.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return m(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,o.jsx)(x.xi,{refreshState:C})]}),O&&!y?(0,o.jsx)(l.x,{padding:64,children:(0,o.jsx)(v.f,{label:"Loading jobs…"})}):function(){if(O&&!b)return(0,o.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(c.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:u.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return T.length?(0,o.jsx)(OverviewJobsTable,{repos:T}):R?(0,o.jsx)(l.x,{padding:{top:20},children:(0,o.jsx)(d.t,{icon:"search",title:"No matching jobs",description:e?(0,o.jsxs)("div",{children:["No jobs matching ",(0,o.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,o.jsxs)("div",{children:["No jobs matching ",(0,o.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,o.jsx)(l.x,{padding:{top:20},children:(0,o.jsx)(d.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,p=f.name,x=f.pipelines,j=(0,I.kQ)(p,l.name),g=x.filter(function(e){var n=e.name;return!(0,m.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:j,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return(0,S.S)(t)},z=(0,a.Ps)(_templateObject(),p.B)},71795:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return eJ}});var r=t(52322),i=t(7267),o=t(58467),s=t(9001),a=t(18399),l=t(2784),c=t(85333),u=t(6692),d=t(73235),h=t(63832),v=t(34822),f=t(9676),p=t(25195),x=t(21106),m=t(67486),j=t(57830),g=t(17276),y=t(44678),w=t(81308),b=t(88510),O=t(47933),C=t(35505),k=t(56266),_=t(55237),R=t(68028),T=t(8169),A=t(99322),S=t(35157),N=t(16339),L=t(58885),E=t(91351),I=t(74711),z=t(28252),P=t(71277),F=t(63386),M=t(83568),W=t(55658),$=t(37160),J=t(38153);function _templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n=e.Header,t=e.TabButton;(0,R.Px)(),(0,z.j)("Overview | Assets");var i=(0,E.Zg)(),s=i.assets,c=i.query,u=i.error,d=i.loading,p=(0,_.bT)({refresh:c,intervalMs:_.dT,leading:!0}),x=l.useMemo(function(){var e;return s?(e={},s.forEach(function(n){if(n.definition){var t=n.definition.groupName,r=n.definition.repository.name,i="".concat(t,"||").concat(r),o=e[i]||{groupName:t,repositoryName:r,assets:[]};o.assets.push(n),e[i]=o}}),Object.values(e)):[]},[s]),m=(0,o._)((0,P.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),j=m[0],g=m[1],y=l.useMemo(function(){return""===j?x:x.filter(function(e){return(e.groupName||B).toLowerCase().includes(j.toLowerCase())||e.repositoryName.toLowerCase().includes(j.toLowerCase())})},[x,j]),w=l.useMemo(function(){var e;return null!==(e=y.flatMap(function(e){return e.assets.map(function(e){return e.key})}))&&void 0!==e?e:[]},[y]),C=(0,T.NY)(w,"OverviewAssetsRoot").liveDataByNode,A=(0,M.se)("OverviewAssetsRoot"),S=Object.keys(C).length===w.length;l.useEffect(function(){S&&A.endTrace()},[S,A]);var N=l.useRef(null),L=(0,b.MG)({count:y.length,getScrollElement:function(){return N.current},estimateSize:function(){return 82},overscan:5}),I=L.getTotalSize(),F=L.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(n,{refreshState:p}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"assets"}),(0,r.jsx)(v.oi,{value:j,onChange:function(e){g(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,r.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,r.jsx)(f.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,r.jsxs)(r.Fragment,{children:["Use the ",(0,r.jsx)(O.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),d?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(h.$,{purpose:"page"})}):u?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(k.T9,{error:u})}):(0,r.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(W.W2,{ref:N,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(W.Nh,{$totalHeight:I,children:F.map(function(e){var n=e.index,t=e.key,i=e.size,o=e.start,s=y[n];return(0,r.jsx)(VirtualRow,{start:o,height:i,group:s},t)})})]})})]})},H="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,r.jsxs)(a.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:H,height:"32px",fontSize:"12px",color:p.$(),position:"sticky",top:0,zIndex:1,background:p.v8()},children:[(0,r.jsx)(W.qN,{children:"Group name"}),(0,r.jsx)(W.qN,{children:"Missing"}),(0,r.jsx)(W.qN,{children:"Failed/Overdue"}),(0,r.jsx)(W.qN,{children:"In progress"}),(0,r.jsx)(W.qN,{children:"Materialized"})]})}var B="Ungrouped Assets";function VirtualRow(e){var n,t,i=e.height,o=e.start,s=e.group,d=l.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),v=(0,T.NY)(d).liveDataByNode,f=(0,M.se)("OverviewAssetsRoot:GroupBatch"),g=l.useMemo(function(){return(0,N.s)(s.assets,v)},[v,s.assets]),y=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,w=(0,$.kQ)((null==y?void 0:y.name)||"",(null==y?void 0:y.location.name)||""),b=(0,x.S)(),C=b.containerProps,k=b.viewport,_=d.length!==Object.keys(v).length,R=_?"":"0";return l.useEffect(function(){_||f.endTrace()},[f,_]),(0,r.jsx)(W.X2,{$height:i,$start:o,children:(0,r.jsxs)(q,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(m.JO,{name:"asset_group"}),s.groupName?(0,r.jsx)(O.rU,{style:{fontWeight:700},to:(0,J.$U)(w,"/asset-groups/".concat(s.groupName)),children:s.groupName}):B]}),(0,r.jsx)("div",(0,u._)((0,c._)({},C),{children:(0,r.jsx)(U,{maxWidth:k.width,children:(0,r.jsx)(F.b,{repoAddress:w,showRefresh:!1})})}))]}),(0,r.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:_?(0,r.jsx)(h.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:g.missing.length?(0,r.jsx)(SelectOnHover,{assets:g.missing,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(j.V,{intent:"none",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(p.im()),borderRadius:"50%"}}),g.missing.length]})})}):R}),(0,r.jsx)(Cell,{children:g.failed.length?(0,r.jsx)(SelectOnHover,{assets:g.failed,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(j.V,{intent:"danger",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),g.failed.length]})})}):R}),(0,r.jsx)(Cell,{children:g.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:g.inprogress,getCount:function(e){var n=e.status;return n.case===A.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(j.V,{intent:"primary",icon:"spinner",children:g.inprogress.length})}):R}),(0,r.jsx)(Cell,{children:g.successful.length?(0,r.jsx)(SelectOnHover,{assets:g.successful,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(j.V,{intent:"success",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:p.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),g.successful.length]})})}):R})]})})}var q=(0,C.ZP)(a.x).withConfig({componentId:"sc-38d869a0-0"})(_templateObject(),H),Cell=function(e){var n=e.children;return(0,r.jsx)(W.E5,{style:{color:p.Ep()},children:(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},U=C.ZP.div.withConfig({componentId:"sc-38d869a0-1"})(_templateObject1(),p.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,i=e.getCount,o=e.adjective;return(0,r.jsx)(D,{children:(0,r.jsx)(g.P,{items:n,itemPredicate:function(e,n){return(0,S.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=i(e);return(0,r.jsx)(K,{to:(0,I.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(y.sN,{text:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(m.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,S.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(w.YS,{style:{color:p.$()},children:[(0,L._e)(n)," ",o]}):null]})},(0,S.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var D=C.ZP.div.withConfig({componentId:"sc-38d869a0-2"})(_templateObject2()),K=(0,C.ZP)(O.rU).withConfig({componentId:"sc-38d869a0-3"})(_templateObject3()),V=t(2281),G=t(17131),Q=(0,t(53360).f)("OverviewPageAlerts"),Z=t(56024),X=t(18613),Y=t(58341),ee=t(81966),en=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,i=(0,ee.dx)(),o=(0,Y.I)(),s=(0,l.useContext)(X.G).enableAssetHealthOverviewPreview;return(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(Z.mQ,{selectedTabId:t,children:[(0,r.jsx)(en.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),s&&(0,r.jsx)(en.f,{id:"asset-health",title:"Asset Health",to:"/overview/asset-health"}),(0,r.jsx)(en.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(en.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(en.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===o?(0,r.jsx)(en.f,{id:"amp",title:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,r.jsx)(h.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?p.L$():p.md()}})]}),to:"/overview/automation"}):null,(0,r.jsx)(en.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(en.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(a.x,{padding:{bottom:8},children:(0,r.jsx)(_.xi,{refreshState:n})}):null]})},OverviewPageHeader=function(e){var n=e.tab,t=e.queryData,i=e.refreshState,o=(0,V._)(e,["tab","queryData","refreshState"]);return(0,r.jsx)(G.m,(0,c._)({title:(0,r.jsx)(w.X6,{children:"Overview"}),tabs:(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(OverviewTabs,{tab:n,queryData:t,refreshState:i}),(0,r.jsx)(Q,{})]})},o))},et=t(99596),er=t(64595),ei=t(84022),eo=t(35564),es=t(15282),useHourWindow=function(e){var n=(0,l.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,o._)((0,es.U)("dagster.run-timeline-hour-window",n),2),r=t[0],i=t[1],s=(0,l.useCallback)(function(n){i(n||e)},[e,i]);return(0,l.useMemo)(function(){return[r,s]},[r,s])},ea=t(87612),el=t(82550),ec=t(40794),eu=t(60138),ed=t(6315),eh=t(38917),ev=t(16413),ef=t(61935);function NextTick_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ep=(0,eu.Ps)(NextTick_templateObject()),ex=t(44254);function useRunsForTimeline_templateObject(){var e=(0,d._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o._)(e,2),r=t[0],i=t[1],s=r/1e3,a=i/1e3,d=(0,ec.a)(em,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,u._)((0,c._)({},n),{statuses:[ef.VOA.CANCELING,ef.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,u._)((0,c._)({},n),{statuses:Array.from(ed.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),h=d.data,v=d.previousData,f=d.loading&&!h,p=h||v||{},x=p.unterminated,m=p.terminated,j=p.workspaceOrError,g=(0,l.useMemo)(function(){var e={},n=Date.now();return(0,el._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,el._)((null==m?void 0:m.__typename)==="Runs"?m.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,ev.a)({start:r,end:i},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var o=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[o]=(0,el._)(e[o]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[i,x,m,r]),y=(0,l.useMemo)(function(){if(!j||"Workspace"!==j.__typename)return[];var e=[],n=!0,t=!1,o=void 0;try{for(var s,a=j.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),o=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)!function(){var o=u.value,s=(0,$.kQ)(o.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=o.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(o.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var v,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0)!function(){var e=v.value;e.scheduleState.status===ef.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var o=n.timestamp,s=1e3*o;s>t&&(0,ev.a)({start:r,end:i},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(o),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}var p=(0,S.pv)(n.name),x=makeJobKey(s,n.name),m=p?"Ad hoc materializations":n.name,j=g[x]||[];if(l.length||j.length){var y=(0,el._)(j).concat((0,el._)(l));if(p){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(b)return(w=b.runs).push.apply(w,(0,el._)(y))}e.push({key:x,jobName:m,jobType:p?"asset":"job",repoAddress:s,path:(0,J.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,el._)(j).concat((0,el._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,u._)((0,c._)({},e),(0,ea._)({},n.key,(t=Math).min.apply(t,(0,el._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[j,g,r,i]);return(0,l.useMemo)(function(){return{jobs:y,initialLoading:f,queryData:d}},[f,y,d])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ex.Uz)(e))},em=(0,eu.Ps)(useRunsForTimeline_templateObject(),eh.$X,ep),ej=t(46988),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,R.Px)(),(0,z.j)("Overview | Timeline");var i=(0,M.se)("OverviewTimelineRoot"),c=l.useContext(ej.C5),u=c.allRepos,d=c.visibleRepos,h=(0,o._)(useHourWindow("12"),2),f=h[0],p=h[1],x=(0,o._)(l.useState(function(){return Date.now()}),2),m=x[0],j=x[1],g=(0,o._)(l.useState(function(){return 0}),2),y=g[0],w=g[1],b=(0,o._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),O=b[0],C=b[1];l.useEffect(function(){j(Date.now());var e=setInterval(function(){j(Date.now())},6e4);return function(){clearInterval(e)}},[f]);var k=l.useCallback(function(){w(function(e){return e-hourWindowToOffset(f)})},[f]),T=l.useCallback(function(){w(function(e){return e+hourWindowToOffset(f)})},[f]),A=l.useCallback(function(){w(0)},[]),S=l.useMemo(function(){return[m-36e5*Number(f)+y,m+36e5+y]},[f,m,y]),N=useRunsForTimeline(S),L=N.jobs,E=N.initialLoading,I=N.queryData,F=(0,_.C4)(I,_.dT);l.useEffect(function(){E||i.endTrace()},[E,i]);var W=l.useMemo(function(){var e=O.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var t=(0,$.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[d,O]),J=l.useMemo(function(){return L.filter(function(e){var n=e.key;return W.has(n)})},[L,W]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:F}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[t&&(0,r.jsx)(t,{selected:"timeline"}),u.length>1&&(0,r.jsx)(ei.C,{}),(0,r.jsx)(v.oi,{icon:"search",value:O,onChange:function(e){return C(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(et.h,{activeItems:new Set([f]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return p(e)}}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(s.zx,{onClick:k,children:"←"}),(0,r.jsx)(s.zx,{onClick:A,children:"Now"}),(0,r.jsx)(s.zx,{onClick:T,children:"→"})]})]})]}),(0,r.jsx)(er.S,{region:"timeline",children:(0,r.jsx)(eo.q,{loading:E,range:S,jobs:J})})]})},eg=t(46928),OverviewActivityRoot=function(){(0,R.Px)(),(0,z.j)("Overview | Activity");var e=l.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(OverviewPageHeader,{tab:"activity",refreshState:n})},[]),n=(0,o._)((0,es.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],c=n[1],u=l.useContext(X.G).enableAssetHealthOverviewPreview,d=u?"timeline":t,h=l.useCallback(function(e){var n=e.selected;return u?null:(d!==n&&c(n),(0,r.jsxs)(s.zH,{children:[(0,r.jsx)(eg.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(eg.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]}))},[d,c,u]);return(0,r.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(i.rs,{children:[!u&&(0,r.jsx)(i.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:h})}),(0,r.jsx)(i.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:h})}),(0,r.jsx)(i.AW,{path:"*",render:l.useCallback(function(){return"timeline"===d?(0,r.jsx)(i.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(i.l_,{to:"/overview/activity/assets"})},[d])})]})})},ey=t(9445),OverviewJobsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Jobs"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(G.m,{title:(0,r.jsx)(w.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs"})}),(0,r.jsx)(ey.e,{})]})},ew=t(92364),eb=t(43180),eO=t(68884),eC=t(98319),ek=t(77277),e_=t(42885),eR=t(41256),OverviewResourcesTable=function(e){var n=e.repos,t=(0,l.useRef)(null),i=(0,l.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ex.Uz)(n)})},[n]),o=(0,e_.N)(eO.y,i),s=o.expandedKeys,a=o.onToggle,u=o.onToggleAll,d=(0,l.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var i=(0,ex.Uz)(t);s.includes(i)&&r.forEach(function(n){e.push((0,c._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),h=(0,ek.w)(n.map(function(e){return e.repoAddress.name})),v=(0,b.MG)({count:d.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=v.getTotalSize(),p=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eC.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(W.W2,{ref:t,children:(0,r.jsx)(W.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,i=e.size,o=e.start,l=d[n];return"header"===l.type?(0,r.jsx)(eR.vG,{repoAddress:l.repoAddress,height:i,start:o,onToggle:a,onToggleAll:u,expanded:s.includes((0,ex.Uz)(l.repoAddress)),showLocation:h.has(l.repoAddress.name),rightElement:(0,r.jsx)(eb.u,{content:1===l.resourceCount?"1 resource":"".concat(l.resourceCount," resources"),placement:"top",children:(0,r.jsx)(j.V,{children:l.resourceCount})})},t):(0,r.jsx)(eC.K,(0,c._)({height:i,start:o},l),t)})})})})]})},eT=t(44392),eA=t(89191),eS=t(91195),eN=t(76588),eL=t(58298);function OverviewResourcesRoot_templateObject(){var e=(0,d._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,R.Px)(),(0,z.j)("Overview | Resources");var e=(0,l.useContext)(ej.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,s=(0,o._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),c=s[0],u=s[1],d=n.length,f=(0,ec.a)(eE,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=f.data,m=f.loading,j=(0,_.C4)(f,_.dT),g=(0,l.useMemo)(function(){var e=(0,eA.S)(t);return buildBuckets(x).filter(function(n){var t=n.repoAddress;return e.has((0,ex.Uz)(t))})},[x,t]),y=c.trim().toLocaleLowerCase(),w=y.length>0,b=(0,l.useMemo)(function(){var e=y.toLocaleLowerCase();return g.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[g,y]),O=i&&!d||m&&!x;return(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"resources",refreshState:j}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d>1?(0,r.jsx)(ei.C,{}):null,(0,r.jsx)(v.oi,{icon:"search",value:c,rightElement:O?(0,r.jsx)(eL.W,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return u(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),m&&!d?(0,r.jsx)(a.x,{padding:64,children:(0,r.jsx)(h.$,{purpose:"page"})}):function(){if(m&&!x)return(0,r.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(h.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:p.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return b.length?(0,r.jsx)(OverviewResourcesTable,{repos:b}):w?(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(ew.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(ew.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,p=f.name,x=f.allTopLevelResourceDetails,m=(0,$.kQ)(p,l.name);x.length>0&&t.push({repoAddress:m,resources:x})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return(0,eT.S)(t)},eE=(0,eu.Ps)(OverviewResourcesRoot_templateObject(),eS.B,eN.L),eI=t(71569),OverviewSchedulesRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Schedules"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"schedules"}),(0,r.jsx)(eI.z,{})]})},ez=t(57070),OverviewSensorsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Sensors"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"sensors"}),(0,r.jsx)(ez.n,{})]})},eP=t(28888),eF=t(81967),eM=t(46032),AutomaterializationRoot=function(){var e=(0,Y.I)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(i.l_,{to:"/overview/sensors"});default:(0,eM.UT)(e)}},GlobalAutomaterializationRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Auto-materialize"),(0,r.jsxs)(eP.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"amp"}),(0,r.jsx)(eF.$,{})]})},eW=t(95881),InstanceBackfillsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Backfills"),(0,r.jsxs)(eP.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"backfills"}),(0,r.jsx)(eW.A,{})]})},e$=t(42006),OverviewRoot=function(){return(0,r.jsxs)(i.rs,{children:[(0,r.jsx)(i.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/jobs",children:(0,r.jsx)(OverviewJobsRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/schedules",children:(0,r.jsx)(OverviewSchedulesRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/sensors",children:(0,r.jsx)(OverviewSensorsRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/automation",children:(0,r.jsx)(AutomaterializationRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(e$.t4,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(InstanceBackfillsRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(i.AW,{path:"*",render:function(){return(0,r.jsx)(i.l_,{to:"/overview/activity"})}})]})},eJ=OverviewRoot}}]);
//# sourceMappingURL=795.37ad4aa6f42d226f.js.map