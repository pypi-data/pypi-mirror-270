<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <record id="view_invoice_line_search" model="ir.ui.view">
      <field name="name">sm.invoice_line.search</field>
      <field name="model">account.invoice.line</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search string="Invoice lines search">
          <field name="name"/>
          <field name="partner_id"/>
          <field name="invoice_id"/>
          <filter string="Default" name="type_default" domain="[('line_type', '=', 'default')]"/>
          <filter string="Carsharing default" name="type_cs_default" domain="[('line_type', '=', 'cs_default')]"/>
          <filter string="Carsharing extra" name="type_cs_extra" domain="[('line_type', '=', 'cs_extra')]"/>
          <filter string="Carsharing teletac" name="type_cs_teletac" domain="[('line_type', '=', 'cs_teletac')]"/>
          <filter string="Carsharing discount" name="type_cs_discount" domain="[('line_type', '=', 'cs_discount')]"/>
          <filter string="Carsharing penalty" name="type_cs_discount" domain="[('line_type', '=', 'cs_penalty')]"/>
        </search>
      </field>
    </record>

    <record id="view_invoice_line_window" model="ir.actions.act_window">
      <field name="name">Invoice lines</field>
      <field name="res_model">account.invoice.line</field>
      <field name="view_mode">tree,form</field>
      <field name="domain">[('invoice_id','!=',False)]</field>
    </record>

    <record id="view_invoice_line_list" model="ir.ui.view">
      <field name="name">account.invoice.line.tree.inherit</field>
      <field name="model">account.invoice.line</field>
      <field name="inherit_id" ref="account.view_invoice_line_tree"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='account_id']" position="before">
          <field name="line_type"/>
          <field name="invoice_id"/>
          <field name="partner_id"/>
          <field name="account_analytic_id"/>
        </xpath>
      </field>
    </record>

    <record id="view_account_invoice_line_form_extend" model="ir.ui.view">
      <field name="name">account.invoice.line.form.inherit</field>
      <field name="model">account.invoice.line</field>
      <field name="inherit_id" ref="account.view_invoice_line_form"/>
      <field name="arch" type="xml">
        <xpath expr="//group" position="inside">
          <group>
            <field name="line_type"/>
            <field name="related_tariff_id"/>
            <field name="invoice_id"/>
            <field name="related_reservation_compute_id" readonly='1'/>
            <field name="invoice_report_id" readonly='1'/>
            <field name="partner_id" readonly='1'/>
          </group>
        </xpath>
      </field>
    </record>

    <menuitem name="Invoice lines" id="sm_invoice_lines" parent="sm_partago_invoicing.menu_root"
          action="view_invoice_line_window"/>

  </data>
</odoo>
