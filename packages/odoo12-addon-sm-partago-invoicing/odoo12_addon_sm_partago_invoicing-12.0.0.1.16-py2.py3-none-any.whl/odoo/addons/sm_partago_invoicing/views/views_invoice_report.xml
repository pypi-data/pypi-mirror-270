<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="view_invoice_report_window" model="ir.actions.act_window">
      <field name="name">Carsharing Reports</field>
      <field name="res_model">sm.invoice_report</field>
      <field name="view_mode">tree,form</field>
    </record>

    <record id="view_invoice_report_search" model="ir.ui.view">
      <field name="name">sm.invoice_report.search</field>
      <field name="model">sm.invoice_report</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search string="DB cs reports search">
          <field name="id"/>
          <field name="name"/>
          <field name="partner_id"/>
          <field name="timeframe_desc"/>
          <field name="invoice_id"/>
        </search>
      </field>
    </record>

    <record id="view_invoice_report_list" model="ir.ui.view">
      <field name="name">sm.invoice_report.list</field>
      <field name="model">sm.invoice_report</field>
      <field name="arch" type="xml">
        <tree>
          <field name="id"/>
          <field name="name"/>
          <field name="partner_id"/>
          <field name="timeframe_desc"/>
          <field name="invoice_id"/>
        </tree>
      </field>
    </record>

    <record id="view_invoice_report_form" model="ir.ui.view">
      <field name="name">sm.invoice_report.form</field>
      <field name="model">sm.invoice_report</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Edit report" version="7.0" delete="false">
          <header>
            <button name="action_report_sent" type="object" string="Send by Email" class="oe_highlight"/>
          </header>
          <sheet>
            <notebook>
              <page string="General">
                <group col="4">
                  <field name="name" attrs="{'required': True}"/>
                  <field name="date"/>
                </group>

                <group col="4">
                  <field name="company_id"/>
                  <field name="partner_id"/>
                </group>

                <group col="4">
                  <field name="grouped_report"/>
                  <field name="email_sent"/>
                </group>

                <group col="4">
                  <field name="timeframe_desc"/>
                  <field name="total_mileage"/>
                </group>

                <group col="4">
                  <field name="previous_pocketbook"/>
                  <field name="previous_pocketbook_taxed"/>
                  <field name="final_pocketbook"/>
                  <field name="final_pocketbook_taxed"/>
                </group>

                <group>
                  <field name="total_amount_lines_untaxed"/>
                  <field name="discount_amount_subtotal"/>
                  <!-- <field name="total_amount_lines_taxes"/>-->
                  <!-- <field name="discount_amount_taxes"/>-->
                  <!-- <field name="total_amount_lines_taxed"/>-->
                  <!-- <field name="discount_amount_total"/>-->
                  <field name="ir_total_amount_signed"/>
                  <field name="invoice_id"/>
                  <field name="total_amount_in_invoice"/>
                  <field name="total_taxes_in_invoice"/>
                </group>

                <group col="4">
                  <field name="predetermined_tariff" invisible="True"/>
                  <field name="predetermined_tariff_description" widget="html" invisible="True"/>
                </group>

                <group>
                  <field name="batch_reservation_id" />
                </group>

                <group>
                  <field name="cs_line_ids" widget="one2many_list">
                    <tree string="Lines" create="true" edit="true" delete="true" open="true">
                      <field name="sequence" widget="handle"/>
                      <field name="name"/>
                      <field name="line_type"/>
                      <field name="penalty_type"/>
                      <field name="parent_invoice_line_id"/>
                      <field name="related_reservation_compute_id"/>
                      <field name="related_tariff_id"/>
                      <field name="price_subtotal_signed"/>
                      <field name="price_total"/>
                      <field name="partner_id"/>
                    </tree>
                    <form>
                      <group>
                        <field name="name"/>
                        <field name="line_type"/>
                        <field name="penalty_type"/>
                        <field name="parent_invoice_line_id"/>
                        <field name="product_id"/>
                        <field name="related_reservation_compute_id"/>
                        <field name="account_id"/>
                        <field name="invoice_line_tax_ids"/>
                        <field name="account_analytic_id"/>
                        <field name="related_tariff_id"/>
                        <field name="partner_id"/>
                        <field name="quantity"/>
                        <field name="price_unit"/>
                      </group>
                    </form>
                  </field>
                </group>


              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <menuitem name="Carsharing reports" id="sm_invoice_report" parent="sm_partago_invoicing.menu_root"
          action="view_invoice_report_window"/>
  </data>
</odoo>
