import os
here = os.path.abspath(os.path.dirname(__file__))
os.environ['CLASSPATH'] = os.path.join(here, "sdk-2.31.0-uber.jar")
from jnius import autoclass, PythonJavaClass, java_method

JString = autoclass("java.lang.String")
JStandardCharsets = autoclass("java.nio.charset.StandardCharsets")

Keystore = autoclass('com.hedera.hashgraph.sdk.Keystore')
FileCreateTransaction = autoclass('com.hedera.hashgraph.sdk.FileCreateTransaction')
SemanticVersion = autoclass('com.hedera.hashgraph.sdk.SemanticVersion')
ContractInfoQuery = autoclass('com.hedera.hashgraph.sdk.ContractInfoQuery')
BaseNodeAddress = autoclass('com.hedera.hashgraph.sdk.BaseNodeAddress')
EthereumTransaction = autoclass('com.hedera.hashgraph.sdk.EthereumTransaction')
ContractByteCodeQuery = autoclass('com.hedera.hashgraph.sdk.ContractByteCodeQuery')
HederaTrustManager = autoclass('com.hedera.hashgraph.sdk.HederaTrustManager')
BadKeyException = autoclass('com.hedera.hashgraph.sdk.BadKeyException')
DelegateContractId = autoclass('com.hedera.hashgraph.sdk.DelegateContractId')
TopicCreateTransaction = autoclass('com.hedera.hashgraph.sdk.TopicCreateTransaction')
ContractFunctionParameters = autoclass('com.hedera.hashgraph.sdk.ContractFunctionParameters')
TokenAllowance = autoclass('com.hedera.hashgraph.sdk.TokenAllowance')
TransactionReceipt = autoclass('com.hedera.hashgraph.sdk.TransactionReceipt')
TokenNftAllowance = autoclass('com.hedera.hashgraph.sdk.TokenNftAllowance')
TokenTransfer = autoclass('com.hedera.hashgraph.sdk.TokenTransfer')
FeeComponents = autoclass('com.hedera.hashgraph.sdk.FeeComponents')
CustomFeeBase = autoclass('com.hedera.hashgraph.sdk.CustomFeeBase')
ProxyStaker = autoclass('com.hedera.hashgraph.sdk.ProxyStaker')
TopicMessageQuery = autoclass('com.hedera.hashgraph.sdk.TopicMessageQuery')
FileContentsQuery = autoclass('com.hedera.hashgraph.sdk.FileContentsQuery')
FeeSchedules = autoclass('com.hedera.hashgraph.sdk.FeeSchedules')
AccountAllowanceAdjustTransaction = autoclass('com.hedera.hashgraph.sdk.AccountAllowanceAdjustTransaction')
BadMnemonicReason = autoclass('com.hedera.hashgraph.sdk.BadMnemonicReason')
ContractUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.ContractUpdateTransaction')
Transfer = autoclass('com.hedera.hashgraph.sdk.Transfer')
Pem = autoclass('com.hedera.hashgraph.sdk.Pem')
EvmAddress = autoclass('com.hedera.hashgraph.sdk.EvmAddress')
ScheduleSignTransaction = autoclass('com.hedera.hashgraph.sdk.ScheduleSignTransaction')
TokenRevokeKycTransaction = autoclass('com.hedera.hashgraph.sdk.TokenRevokeKycTransaction')
MaxQueryPaymentExceededException = autoclass('com.hedera.hashgraph.sdk.MaxQueryPaymentExceededException')
IPv4Address = autoclass('com.hedera.hashgraph.sdk.IPv4Address')
TokenType = autoclass('com.hedera.hashgraph.sdk.TokenType')
Status = autoclass('com.hedera.hashgraph.sdk.Status')
MaxAttemptsExceededException = autoclass('com.hedera.hashgraph.sdk.MaxAttemptsExceededException')
TokenFreezeTransaction = autoclass('com.hedera.hashgraph.sdk.TokenFreezeTransaction')
TokenUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.TokenUpdateTransaction')
ScheduleDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.ScheduleDeleteTransaction')
EthereumFlow = autoclass('com.hedera.hashgraph.sdk.EthereumFlow')
TokenUnfreezeTransaction = autoclass('com.hedera.hashgraph.sdk.TokenUnfreezeTransaction')
TokenBurnTransaction = autoclass('com.hedera.hashgraph.sdk.TokenBurnTransaction')
EthereumTransactionDataEip1559 = autoclass('com.hedera.hashgraph.sdk.EthereumTransactionDataEip1559')
TokenSupplyType = autoclass('com.hedera.hashgraph.sdk.TokenSupplyType')
NetworkVersionInfo = autoclass('com.hedera.hashgraph.sdk.NetworkVersionInfo')
ContractLogInfo = autoclass('com.hedera.hashgraph.sdk.ContractLogInfo')
CustomFractionalFee = autoclass('com.hedera.hashgraph.sdk.CustomFractionalFee')
AccountDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.AccountDeleteTransaction')
ContractFunctionResult = autoclass('com.hedera.hashgraph.sdk.ContractFunctionResult')
AssessedCustomFee = autoclass('com.hedera.hashgraph.sdk.AssessedCustomFee')
MirrorNode = autoclass('com.hedera.hashgraph.sdk.MirrorNode')
FileInfo = autoclass('com.hedera.hashgraph.sdk.FileInfo')
LedgerId = autoclass('com.hedera.hashgraph.sdk.LedgerId')
PublicKeyECDSA = autoclass('com.hedera.hashgraph.sdk.PublicKeyECDSA')
PrivateKeyED25519 = autoclass('com.hedera.hashgraph.sdk.PrivateKeyED25519')
TokenAssociation = autoclass('com.hedera.hashgraph.sdk.TokenAssociation')
ContractStateChange = autoclass('com.hedera.hashgraph.sdk.ContractStateChange')
ChunkedTransaction = autoclass('com.hedera.hashgraph.sdk.ChunkedTransaction')
TransactionReceiptQuery = autoclass('com.hedera.hashgraph.sdk.TransactionReceiptQuery')
ContractInfo = autoclass('com.hedera.hashgraph.sdk.ContractInfo')
TopicUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.TopicUpdateTransaction')
PrivateKeyECDSA = autoclass('com.hedera.hashgraph.sdk.PrivateKeyECDSA')
FeeData = autoclass('com.hedera.hashgraph.sdk.FeeData')
Client = autoclass('com.hedera.hashgraph.sdk.Client')
EntityIdHelper = autoclass('com.hedera.hashgraph.sdk.EntityIdHelper')
KeyList = autoclass('com.hedera.hashgraph.sdk.KeyList')
AccountUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.AccountUpdateTransaction')
Query = autoclass('com.hedera.hashgraph.sdk.Query')
SystemUndeleteTransaction = autoclass('com.hedera.hashgraph.sdk.SystemUndeleteTransaction')
TopicMessageSubmitTransaction = autoclass('com.hedera.hashgraph.sdk.TopicMessageSubmitTransaction')
TopicId = autoclass('com.hedera.hashgraph.sdk.TopicId')
BadEntityIdException = autoclass('com.hedera.hashgraph.sdk.BadEntityIdException')
TransactionFeeSchedule = autoclass('com.hedera.hashgraph.sdk.TransactionFeeSchedule')
TokenDissociateTransaction = autoclass('com.hedera.hashgraph.sdk.TokenDissociateTransaction')
NetworkName = autoclass('com.hedera.hashgraph.sdk.NetworkName')
TokenInfoQuery = autoclass('com.hedera.hashgraph.sdk.TokenInfoQuery')
LiveHashQuery = autoclass('com.hedera.hashgraph.sdk.LiveHashQuery')
AccountId = autoclass('com.hedera.hashgraph.sdk.AccountId')
PublicKeyED25519 = autoclass('com.hedera.hashgraph.sdk.PublicKeyED25519')
AccountBalanceQuery = autoclass('com.hedera.hashgraph.sdk.AccountBalanceQuery')
AccountInfoQuery = autoclass('com.hedera.hashgraph.sdk.AccountInfoQuery')
TokenAssociateTransaction = autoclass('com.hedera.hashgraph.sdk.TokenAssociateTransaction')
ExchangeRates = autoclass('com.hedera.hashgraph.sdk.ExchangeRates')
FreezeType = autoclass('com.hedera.hashgraph.sdk.FreezeType')
TokenDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.TokenDeleteTransaction')
FeeAssessmentMethod = autoclass('com.hedera.hashgraph.sdk.FeeAssessmentMethod')
PublicKey = autoclass('com.hedera.hashgraph.sdk.PublicKey')
ThreadLocalSecureRandom = autoclass('com.hedera.hashgraph.sdk.ThreadLocalSecureRandom')
AccountAllowanceApproveTransaction = autoclass('com.hedera.hashgraph.sdk.AccountAllowanceApproveTransaction')
ContractFunctionSelector = autoclass('com.hedera.hashgraph.sdk.ContractFunctionSelector')
IPv4AddressPart = autoclass('com.hedera.hashgraph.sdk.IPv4AddressPart')
ConsumerHelper = autoclass('com.hedera.hashgraph.sdk.ConsumerHelper')
ScheduleCreateTransaction = autoclass('com.hedera.hashgraph.sdk.ScheduleCreateTransaction')
CustomFixedFee = autoclass('com.hedera.hashgraph.sdk.CustomFixedFee')
TopicDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.TopicDeleteTransaction')
HederaPreCheckStatusException = autoclass('com.hedera.hashgraph.sdk.HederaPreCheckStatusException')
ContractCreateFlow = autoclass('com.hedera.hashgraph.sdk.ContractCreateFlow')
FileUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.FileUpdateTransaction')
AccountRecordsQuery = autoclass('com.hedera.hashgraph.sdk.AccountRecordsQuery')
TransactionRecord = autoclass('com.hedera.hashgraph.sdk.TransactionRecord')
SystemDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.SystemDeleteTransaction')
Bip32Utils = autoclass('com.hedera.hashgraph.sdk.utils.Bip32Utils')
StorageChange = autoclass('com.hedera.hashgraph.sdk.StorageChange')
TokenUnpauseTransaction = autoclass('com.hedera.hashgraph.sdk.TokenUnpauseTransaction')
ContractNonceInfo = autoclass('com.hedera.hashgraph.sdk.ContractNonceInfo')
InstantConverter = autoclass('com.hedera.hashgraph.sdk.InstantConverter')
TokenNftInfoQuery = autoclass('com.hedera.hashgraph.sdk.TokenNftInfoQuery')
SubscriptionHandle = autoclass('com.hedera.hashgraph.sdk.SubscriptionHandle')
FileAppendTransaction = autoclass('com.hedera.hashgraph.sdk.FileAppendTransaction')
FileInfoQuery = autoclass('com.hedera.hashgraph.sdk.FileInfoQuery')
TokenPauseTransaction = autoclass('com.hedera.hashgraph.sdk.TokenPauseTransaction')
LiveHashAddTransaction = autoclass('com.hedera.hashgraph.sdk.LiveHashAddTransaction')
ScheduleId = autoclass('com.hedera.hashgraph.sdk.ScheduleId')
NodeAddress = autoclass('com.hedera.hashgraph.sdk.NodeAddress')
TokenWipeTransaction = autoclass('com.hedera.hashgraph.sdk.TokenWipeTransaction')
FeeDataType = autoclass('com.hedera.hashgraph.sdk.FeeDataType')
LockableList = autoclass('com.hedera.hashgraph.sdk.LockableList')
Crypto = autoclass('com.hedera.hashgraph.sdk.Crypto')
TopicMessageChunk = autoclass('com.hedera.hashgraph.sdk.TopicMessageChunk')
Network = autoclass('com.hedera.hashgraph.sdk.Network')
TokenNftInfo = autoclass('com.hedera.hashgraph.sdk.TokenNftInfo')
PrivateKey = autoclass('com.hedera.hashgraph.sdk.PrivateKey')
ContractCallQuery = autoclass('com.hedera.hashgraph.sdk.ContractCallQuery')
TransferTransaction = autoclass('com.hedera.hashgraph.sdk.TransferTransaction')
NetworkVersionInfoQuery = autoclass('com.hedera.hashgraph.sdk.NetworkVersionInfoQuery')
RequestType = autoclass('com.hedera.hashgraph.sdk.RequestType')
EthereumTransactionData = autoclass('com.hedera.hashgraph.sdk.EthereumTransactionData')
ScheduleInfo = autoclass('com.hedera.hashgraph.sdk.ScheduleInfo')
PrecheckStatusException = autoclass('com.hedera.hashgraph.sdk.PrecheckStatusException')
EthereumTransactionDataLegacy = autoclass('com.hedera.hashgraph.sdk.EthereumTransactionDataLegacy')
TokenInfo = autoclass('com.hedera.hashgraph.sdk.TokenInfo')
ExchangeRate = autoclass('com.hedera.hashgraph.sdk.ExchangeRate')
ContractDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.ContractDeleteTransaction')
AccountInfoFlow = autoclass('com.hedera.hashgraph.sdk.AccountInfoFlow')
TokenId = autoclass('com.hedera.hashgraph.sdk.TokenId')
LiveHash = autoclass('com.hedera.hashgraph.sdk.LiveHash')
LiveHashDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.LiveHashDeleteTransaction')
BaseNode = autoclass('com.hedera.hashgraph.sdk.BaseNode')
Endpoint = autoclass('com.hedera.hashgraph.sdk.Endpoint')
AddressBookQuery = autoclass('com.hedera.hashgraph.sdk.AddressBookQuery')
TokenFeeScheduleUpdateTransaction = autoclass('com.hedera.hashgraph.sdk.TokenFeeScheduleUpdateTransaction')
NodeAddressBook = autoclass('com.hedera.hashgraph.sdk.NodeAddressBook')
TransactionId = autoclass('com.hedera.hashgraph.sdk.TransactionId')
ContractExecuteTransaction = autoclass('com.hedera.hashgraph.sdk.ContractExecuteTransaction')
CustomFee = autoclass('com.hedera.hashgraph.sdk.CustomFee')
FeeSchedule = autoclass('com.hedera.hashgraph.sdk.FeeSchedule')
TokenMintTransaction = autoclass('com.hedera.hashgraph.sdk.TokenMintTransaction')
ContractId = autoclass('com.hedera.hashgraph.sdk.ContractId')
Delayer = autoclass('com.hedera.hashgraph.sdk.Delayer')
BaseNetwork = autoclass('com.hedera.hashgraph.sdk.BaseNetwork')
ReceiptStatusException = autoclass('com.hedera.hashgraph.sdk.ReceiptStatusException')
AccountStakersQuery = autoclass('com.hedera.hashgraph.sdk.AccountStakersQuery')
FutureConverter = autoclass('com.hedera.hashgraph.sdk.FutureConverter')
DurationConverter = autoclass('com.hedera.hashgraph.sdk.DurationConverter')
ContractCreateTransaction = autoclass('com.hedera.hashgraph.sdk.ContractCreateTransaction')
FileDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.FileDeleteTransaction')
HbarAllowance = autoclass('com.hedera.hashgraph.sdk.HbarAllowance')
TokenNftTransfer = autoclass('com.hedera.hashgraph.sdk.TokenNftTransfer')
FileId = autoclass('com.hedera.hashgraph.sdk.FileId')
NftId = autoclass('com.hedera.hashgraph.sdk.NftId')
HbarUnit = autoclass('com.hedera.hashgraph.sdk.HbarUnit')
TopicMessage = autoclass('com.hedera.hashgraph.sdk.TopicMessage')
AccountInfo = autoclass('com.hedera.hashgraph.sdk.AccountInfo')
TokenCreateTransaction = autoclass('com.hedera.hashgraph.sdk.TokenCreateTransaction')
TokenRelationship = autoclass('com.hedera.hashgraph.sdk.TokenRelationship')
PrngTransaction = autoclass('com.hedera.hashgraph.sdk.PrngTransaction')
Transaction = autoclass('com.hedera.hashgraph.sdk.Transaction')
FreezeTransaction = autoclass('com.hedera.hashgraph.sdk.FreezeTransaction')
ExecutionState = autoclass('com.hedera.hashgraph.sdk.ExecutionState')
Mnemonic = autoclass('com.hedera.hashgraph.sdk.Mnemonic')
MirrorNetwork = autoclass('com.hedera.hashgraph.sdk.MirrorNetwork')
HederaReceiptStatusException = autoclass('com.hedera.hashgraph.sdk.HederaReceiptStatusException')
Key = autoclass('com.hedera.hashgraph.sdk.Key')
CustomRoyaltyFee = autoclass('com.hedera.hashgraph.sdk.CustomRoyaltyFee')
Hbar = autoclass('com.hedera.hashgraph.sdk.Hbar')
TransactionRecordQuery = autoclass('com.hedera.hashgraph.sdk.TransactionRecordQuery')
TransactionResponse = autoclass('com.hedera.hashgraph.sdk.TransactionResponse')
TopicInfoQuery = autoclass('com.hedera.hashgraph.sdk.TopicInfoQuery')
AccountAllowanceDeleteTransaction = autoclass('com.hedera.hashgraph.sdk.AccountAllowanceDeleteTransaction')
TokenGrantKycTransaction = autoclass('com.hedera.hashgraph.sdk.TokenGrantKycTransaction')
AccountBalance = autoclass('com.hedera.hashgraph.sdk.AccountBalance')
TopicInfo = autoclass('com.hedera.hashgraph.sdk.TopicInfo')
AccountCreateTransaction = autoclass('com.hedera.hashgraph.sdk.AccountCreateTransaction')
Executable = autoclass('com.hedera.hashgraph.sdk.Executable')
BadMnemonicException = autoclass('com.hedera.hashgraph.sdk.BadMnemonicException')
Node = autoclass('com.hedera.hashgraph.sdk.Node')
ScheduleInfoQuery = autoclass('com.hedera.hashgraph.sdk.ScheduleInfoQuery')
StakingInfo = autoclass('com.hedera.hashgraph.sdk.StakingInfo')
LogLevel = autoclass('com.hedera.hashgraph.sdk.logger.LogLevel')
Logger = autoclass('com.hedera.hashgraph.sdk.logger.Logger')


class PyConsumer(PythonJavaClass):
    __javainterfaces__ = ['java/util/function/Consumer']

    def __init__(self, fn):
        self.fn = fn

    @java_method('(Ljava/lang/Object;)V')
    def accept(self, msg):
        ts = msg.consensusTimestamp.toString()
        sn = msg.sequenceNumber
        contents = JString(msg.contents, JStandardCharsets.UTF_8).toString()
        self.fn(ts, sn, contents)
