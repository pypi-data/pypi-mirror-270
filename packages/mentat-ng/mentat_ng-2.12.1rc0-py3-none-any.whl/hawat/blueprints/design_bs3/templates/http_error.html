{% extends "_layout.html" %}

{% block title %}{{ status }}: {{ error }}{% endblock %}

{% block content %}
    <div>
        <div class="jumbotron bg-light" style="margin-top: 1em;">
            <h1 class="text-center">{{ status }}</h1>
            <p class="lead text-center">
                {{ error }}!
            </p>
            <hr>
    {%- if exception and exception.description %}
        <p class="text-center">
            {{ exception.description | safe }}
        </p>
    {%- elif status == 499 %}
            <p class="text-center">
                {{ _('The query was canceled.') }}
            </p>
    {%- elif status == 400 %}
            {%- if message %}
                <p class="text-center">
                    {{ message | safe }}
                </p>
            {%- else %}
                <p class="text-center">
                    {{ _('It seems you have done something naughty.') }}
                </p>
            {%- endif %}
    {%- elif status == 403 %}
            {%- if message %}
                <p class="text-center">
                    {{ message | safe }}
                </p>
            {%- else %}
                <p class="text-center">
                    {{ _('It seems you do not have sufficient permissions to access this resource.') }}
                </p>
            {%- endif %}
    {%- elif status == 404 %}
            <p class="text-center">
                {{ _('We have looked hard, really really hard, but what you were looking for is just not there.') }}
            </p>
    {%- elif status == 405 %}
            <p class="text-center">
                {{ _('You have used HTTP method that is not valid for this URL.') }}
            </p>
    {%- elif status == 410 %}
            <p class="text-center">
                {{ _('What you were looking for is just not there anymore, it is gone forever.') }}
            </p>
    {%- elif status == 500 %}
            <p class="text-center">
                {{ _('We are sorry, but something on our side of the line went terribly wrong. Please try again later.') }}
            </p>
    {%- else %}
        {%- if message %}
            <p class="text-center">
                {{ message }}
            </p>
        {%- else %}
            <p class="text-center">
                {{ _('We are sorry, but something went wrong. Please try again later.') }}
            </p>
        {%- endif %}
    {%- endif %}
    {%- if retry_url is defined %}
        <p class="text-center">
            {{ _('You can retry') }} <a href="{{ retry_url }}">{{ _('here.') }}</a>
        </p>
    {%- endif %}
        </div>
    </div>
{# When accessing static files, there is no identity in g so the can() function would raise an exception. #}
{%- if 'identity' in g and permission_can('developer') %}
    <hr>
    {{ macros_site.render_raw_var('status', status) }}
    {{ macros_site.render_raw_var('error', error) }}
    {%- if message %}
        {{ macros_site.render_raw_var('message', message) }}
    {%- endif %}
    {%- if exception %}
        {{ macros_site.render_raw_var('exception', exception) }}
        {{ macros_site.render_raw_var('description', exception.description) }}
    {%- endif %}
{%- endif %}
{% endblock %}
