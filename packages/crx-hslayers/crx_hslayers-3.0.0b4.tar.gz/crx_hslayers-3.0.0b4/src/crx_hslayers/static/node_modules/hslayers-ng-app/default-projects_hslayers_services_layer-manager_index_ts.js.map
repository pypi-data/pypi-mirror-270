{"version":3,"file":"default-projects_hslayers_services_layer-manager_index_ts.js","mappings":"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","sources":["webpack:///default-projects_hslayers_services_layer-manager_index_ts.js"],"sourcesContent":["\"use strict\";(self.webpackChunkhslayers_app=self.webpackChunkhslayers_app||[]).push([[\"default-projects_hslayers_services_layer-manager_index_ts\"],{27383:(Z,T,h)=>{h.d(T,{tl:()=>D,$B:()=>le,u4:()=>H,ng:()=>ne,qA:()=>B,Te:()=>W,lX:()=>I});var f=h(10467),K=h(65935),x=h(56287),a=h(88716),o=h(54438),b=h(40736),S=h(47317),v=h(22187),p=h(91459),O=h(48791),F=h(46526),V=h(14608),z=h(5991),m=h(27426);let D=(()=>{class c{constructor(t,e,s,r){this.hsConfig=t,this.hsMapService=e,this.hsStylerService=s,this.hsUtilsService=r,this.layersClusteredFromStart=[]}cluster(t,e,s,r){var i=this;return(0,f.A)(function*(){1==t?i.hsUtilsService.instOf(e.getSource(),F.A)||(e.setSource(i.createClusteredSource(e,s)),r&&(yield i.hsStylerService.styleClusteredLayer(e)),i.updateFeatureTableLayers(e)):i.hsUtilsService.instOf(e.getSource(),F.A)&&e.setSource(e.getSource().getSource())})()}createClusteredSource(t,e){return new F.A({distance:e,source:t.getSource(),geometryFunction:function(s){if(!s)return null;switch(s.getGeometry().getType()){case\"Point\":return s.getGeometry();case\"Circle\":return new O.default(s.getGeometry().getCenter());case\"Polygon\":return s.getGeometry().getInteriorPoint();case\"LineString\":return new O.default(s.getGeometry().getFirstCoordinate());default:return null}}})}updateFeatureTableLayers(t){const e=this.hsConfig.layersInFeatureTable?.findIndex(s=>s==t);t&&e>-1&&(this.hsConfig.layersInFeatureTable[e]=t)}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(b.Q),o.KVO(V.F),o.KVO(z.qm),o.KVO(m.MJ))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var Y=h(11229),$=h(35222),j=h(87549),U=h(38243),C=h(94928);let H=(()=>{class c{constructor(t,e,s,r,i,n,l,u,y,d){this.HsWmtsGetCapabilitiesService=t,this.HsWfsGetCapabilitiesService=e,this.HsWmsGetCapabilitiesService=s,this.HsArcgisGetCapabilitiesService=r,this.HsDimensionTimeService=i,this.HsLayerUtilsService=n,this.hsLog=l,this.hsUrlWmsService=u,this.hsMapService=y,this.hsAddDataUrlService=d}identifyLayerObject(t,e,s=!1){if(t==e.Name||s)return s?this.getParsedLayers(e):e;if(Array.isArray(e.Layer))for(const r of e.Layer){const i=this.identifyLayerObject(t,r);if(i)return i}else if(e.Layer)return this.identifyLayerObject(t,e.Layer);return null}getParsedLayers(t){return t.Layer.every(s=>s.Name)||(t.Layer=this.hsUrlWmsService.filterCapabilitiesLayers(t)),t}fillMetadata(t){var e=this;return(0,f.A)(function*(){const s=t.layer;try{yield e.queryMetadata(t)}catch(i){e.hsLog.warn(`Error while querying metadata ${i}`)}const r=(0,a.jA)(s)?.Layer;null!=r&&r.length>0&&(t.hasSublayers||(t.hasSublayers=!0))})()}metadataArray(t){return(0,a.yb)(t.layer)?.urls}hasMetadata(t){return!!t&&!(!t||!(0,a.yb)(t.layer)?.urls)}searchForScaleDenominator(t){const e=this.hsMapService.getMap().getView();let s=t.MaxScaleDenominator?this.HsLayerUtilsService.calculateResolutionFromScale(t.MaxScaleDenominator,e):null;const r=t.MinScaleDenominator?this.HsLayerUtilsService.calculateResolutionFromScale(t.MinScaleDenominator,e):0,i=t.Layer;if(i)for(const n of i)if(n.Layer){const l=this.searchForScaleDenominator(n);s=l>s?l:s}else n.MaxScaleDenominator?(n.maxResolution=this.HsLayerUtilsService.calculateResolutionFromScale(n.MaxScaleDenominator,e),s<n.maxResolution&&null!==s&&(s=this.HsLayerUtilsService.calculateResolutionFromScale(n.MaxScaleDenominator,e))):n.maxResolution||(n.maxResolution=s??Number.MAX_VALUE);return s&&(t.maxResolution=s),r&&(t.minResolution=r),s}setOrUpdate(t,e,s){const r=t.get(e);if(r)for(const i of s)t.set(e,r.push(i));else t.set(e,s)}parseWmsCapsMultipleLayers(t,e,s,r){let i;const n=s.Capability.Layer,l=[];for(const u of t.split(\",\")){const y=this.identifyLayerObject(u,n);l.push(y),this.collectLegend(y,r),y&&void 0!==y.Layer&&(0,a.vx)(e)&&delete y.Layer}return this.setCapsExtent(this.hsAddDataUrlService.calcCombinedExtent(l.map(u=>this.getCapsExtent(u,n))),e),void 0===(0,a.jA)(e)&&(i=Object.assign(JSON.parse(JSON.stringify(l[0])),{maxResolution:Math.max(...l.map(u=>this.searchForScaleDenominator(u))),Layer:l})),this.fillMetadataUrlsIfNotExist(e,s),i}parseWmsCapsSingleLayer(t,e,s,r){const i=e.layer,n=s.Capability.Layer,l=this.identifyLayerObject(t,n,i.get(\"serviceLayer\"));if(null!=l){if(i.setProperties(l),(\"time\"===l.Dimension?.name||l.Dimension?.find(u=>\"time\"===u.name))&&this.HsDimensionTimeService.setupTimeLayer(e,l),l.Layer&&(0,a.vx)(i)){l.maxResolution=this.searchForScaleDenominator(l);const u=(0,a.vx)(i).split(\",\");l.Layer=l.Layer.filter(y=>u.includes(y.Name))}return l.queryable&&null==this.HsLayerUtilsService.getLayerParams(i)?.INFO_FORMAT&&this.HsLayerUtilsService.updateLayerParams(i,{INFO_FORMAT:\"application/vnd.ogc.gml\"}),this.collectLegend(l,r),this.setCapsExtent(this.getCapsExtent(l,n),i),l}}parseWmsCaps(t,e,s){const r=t.layer,i=[];let n;n=e.includes(\",\")?this.parseWmsCapsMultipleLayers(e,r,s,i):this.parseWmsCapsSingleLayer(e,t,s,i),void 0===(0,a.jA)(r)&&(0,a.BA)(r,n),this.parseAttribution(r,(0,a.jA)(r));const l=(0,a.pL)(r);i.length>0&&null==l&&(0,a.ZX)(r,i)}setCapsExtent(t,e){null!==t&&e.setExtent(t)}getCapsExtent(t,e){let s=(t.EX_GeographicBoundingBox||t.BoundingBox)??(e.EX_GeographicBoundingBox||e.BoundingBox);return s=s?s[0].crs?s.find(r=>\"CRS:84\"!=r.crs&&(0,j.get)(t.BoundingBox[0])):s:[-180,-90,180,90],(0,j.transformExtent)(s.extent??s,s.crs??\"EPSG:4326\",this.hsMapService.getCurrentProj())}collectLegend(t,e){const s=t?.Style?.find(r=>void 0!==r.LegendURL);s&&e.push(s.LegendURL[0].OnlineResource)}parseAttribution(t,e){const s=e.Attribution;(0,a.gz)(t)?.locked||null==s||(0,a.eo)(t,{title:s.Title,onlineResource:s.OnlineResource,logoUrl:s.LogoURL?{format:s.LogoURL.Format,onlineResource:s.LogoURL.OnlineResource}:void 0})}queryMetadata(t){var e=this;return(0,f.A)(function*(){const s=t.layer,r=e.HsLayerUtilsService.getURL(s);if(r&&0!==r.length)if(e.HsLayerUtilsService.isLayerArcgis(s)){const i=yield e.HsArcgisGetCapabilitiesService.request(r);if(i.error)return i.response;e.parseArcGisCaps(t,i.response)}else{if(e.HsLayerUtilsService.isLayerWMS(s)){const i=yield e.HsWmsGetCapabilitiesService.request(r);if(i.error)return e.hsLog.warn(\"GetCapabilities call invalid\",i.response),i.response;const l=(new Y.A).read(i.response),y=e.HsLayerUtilsService.getLayerParams(s).LAYERS;e.parseWmsCaps(t,y,l);const d=(0,a.vx)(s);return d&&(Array.isArray(d)&&0==d.length||e.HsLayerUtilsService.updateLayerParams(s,{LAYERS:(0,a.vx)(s)})),e.fillMetadataUrlsIfNotExist(s,l),setTimeout(()=>{if((0,a.xx)(s))return void s.setMaxResolution((0,a.xx)(s));const L=e.searchForScaleDenominator(s.getProperties());L&&s.setMaxResolution(L)}),!0}if(e.HsLayerUtilsService.isLayerWMTS(s)){const i=yield e.HsWmtsGetCapabilitiesService.request(r);if(i.error)return i.response;{const l=(new $.A).read(i.response);return s.setProperties(l),(0,a.gz)(s)?.locked||(0,a.eo)(s,{onlineResource:l.ServiceProvider.ProviderSite}),!0}}if(e.HsLayerUtilsService.isLayerVectorLayer(s)&&r){const i=yield e.HsWfsGetCapabilitiesService.request(r);if(i.error)return i.response;{const u=(new DOMParser).parseFromString(i.response.data,\"application/xml\").getElementsByTagNameNS(\"*\",\"ProviderSite\");return(0,a.gz)(s)?.locked||(0,a.eo)(s,{onlineResource:u[0].getAttribute(\"xlink:href\")}),!0}}}})()}parseArcGisCaps(t,e){const s=t.layer,i=this.HsLayerUtilsService.getLayerParams(s).LAYERS,n=[];let l;if(void 0!==i&&(i.includes(\",\")||i.includes(\"show\"))){const y=[];for(const d of i.replace(\"show:\",\"\").split(\",\")){const L=this.identifyArcgisLayerObj(parseInt(d),e);y.push(L),this.collectLegend(L,n),L&&void 0!==L.Layer&&(0,a.vx)(s)&&delete L.Layer}void 0===(0,a.jA)(s)&&(l=Object.assign(JSON.parse(JSON.stringify(y[0])),{Layer:y}))}else{if(l=this.identifyArcgisLayerObj(parseInt(i),e),null==l)return;l.Layer&&(0,a.vx)(s)&&delete l.Layer,this.collectLegend(l,n)}null==(0,a.jA)(s)&&(0,a.BA)(s,l),this.parseAttribution(s,(0,a.jA)(s));const u=(0,a.pL)(s);n.length>0&&null==u&&(0,a.ZX)(s,n)}identifyArcgisLayerObj(t,e){if(null==t||isNaN(t))return{Title:e.mapName,Name:0,Layer:e?.layers?.map(s=>({Title:s.name,Name:s.id}))};{const s=e.layers.find(r=>r.id==t);if(s){const r={Title:s.name,Name:s.id,Layer:e.layers.filter(i=>i.parentLayerId==t).map(i=>({Title:i.name,Name:i.id}))};return 0==r.Layer.length&&delete r.Layer,r}}return null}fillMetadataUrlsIfNotExist(t,e){null==(0,a.yb)(t)&&(0,a.kq)(t,{urls:[{onlineResource:e.Service.OnlineResource}]})}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(S.oh),o.KVO(S.BT),o.KVO(S.Uz),o.KVO(S.OO),o.KVO(S.C6),o.KVO(m.Xp),o.KVO(U.r),o.KVO(C.l6),o.KVO(V.F),o.KVO(C.Zf))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var A=h(21413);let I=(()=>{class c{constructor(){this.layerSelected=new A.B}select(t){this.currentLayer=t,this.layerSelected.next(t)}static#e=this.\\u0275fac=function(e){return new(e||c)};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var J=h(24025),X=h(11194),G=h(78373),Q=h(345),k=h(83093);let B=(()=>{class c{constructor(t,e,s,r,i){this.hsConfig=t,this.hsLayerUtilsService=e,this.hsLayerSelectorService=s,this.hsMapService=r,this.hsLog=i,this.layerSelected=new A.B}expandFilter(t,e){t.expandFilter=e,this.hsLayerSelectorService.currentLayer=t,this.hsLayerSelectorService.select(t)}expandInfo(t,e){t.expandInfo=e}saveGeoJson(){const t=new k.default,e=this.hsLayerSelectorService.currentLayer.layer,s=t.writeFeatures((this.hsLayerUtilsService.isLayerClustered(e)?e.getSource().getSource():e.getSource()).getFeatures(),{dataProjection:\"EPSG:4326\",featureProjection:this.hsMapService.getCurrentProj()}),r=new Blob([s],{type:\"application/json\"}),i=document.createElement(\"a\"),n=URL.createObjectURL(r);i.href=n,i.download=(0,a.LK)(this.hsLayerSelectorService.currentLayer.layer).replace(/\\s/g,\"\"),document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),window.URL.revokeObjectURL(n)},0)}getLayerSourceType(t){var e=this;return(0,f.A)(function*(){return(yield e.hsLayerUtilsService.isLayerKMLSource(t))?\"vector (KML)\":(yield e.hsLayerUtilsService.isLayerGPXSource(t))?\"vector (GPX)\":(yield e.hsLayerUtilsService.isLayerGeoJSONSource(t))?\"vector (GeoJSON)\":(yield e.hsLayerUtilsService.isLayerTopoJSONSource(t))?\"vector (TopoJSON)\":e.hsLayerUtilsService.isLayerVectorLayer(t)?\"vector\":e.hsLayerUtilsService.isLayerWMTS(t)?\"WMTS\":e.hsLayerUtilsService.isLayerWMS(t)?\"WMS\":e.hsLayerUtilsService.isLayerXYZ(t)?\"XYZ\":e.hsLayerUtilsService.isLayerArcgis(t)?\"ArcGIS\":e.hsLayerUtilsService.isLayerIDW(t)?\"IDW\":(e.hsLog.warn(`Cannot decide a type of source of layer ${(0,a.LK)(t)}`),\"unknown type\")})()}getLayerSourceUrl(t){const e=this.hsLayerUtilsService.getURL(t)?.split(\"?\")[0];return!e||e.startsWith(\"data:\")?\"memory\":e}checkLayerHealth(t){this.hsLayerUtilsService.isLayerWMS(t)&&null==this.hsLayerUtilsService.getLayerParams(t).LAYERS&&this.hsLog.warn(\"Layer\",t,\"is missing LAYERS parameter\")}getImage(t){const e=(0,a.Eb)(t);return e?e.length>10?e:this.hsConfig.assetsPath+\"img/\"+e:this.hsConfig.assetsPath+\"img/default.png\"}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(b.Q),o.KVO(m.Xp),o.KVO(I),o.KVO(V.F),o.KVO(U.r))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var P=h(47616);let W=(()=>{class c{constructor(t,e,s,r){this.hsMapService=t,this.hsConfig=e,this.hsUtilsService=s,this.hsEventBusService=r,this.baselayersVisible=!0}layerVisibilityChanged(t){if(1!=(0,a.W1)(t.target)){for(const e of this.data.layers)if(e.layer==t.target){e.visible=t.target.getVisible();break}}else for(const e of this.data.baselayers)e.active=e.layer==t.target&&t.target.getVisible()}isLayerInResolutionInterval(t){const e=this.hsMapService.getMap().getView().getResolution();return this.currentResolution=e,t.getMinResolution()<=e&&e<=t.getMaxResolution()}changeLayerVisibility(t,e){if(e.layer.setVisible(t),e.visible=t,e.grayed=!this.isLayerInResolutionInterval(e.layer),t&&1==(0,a.lo)(e.layer))for(const s of this.data.layers){const r=!this.hsConfig.pathExclusivity||(0,a.Yn)(s.layer)==(0,a.Yn)(e.layer);1==(0,a.lo)(s.layer)&&s!=e&&r&&(s.layer.setVisible(!1),s.visible=!1)}!t&&this.hsUtilsService.instOf(e.layer,P.A)&&this.hsEventBusService.LayerManagerLayerVisibilityChanges.next(e)}activateTheme(t){const e=!(0,a.FQ)(t);(0,a.Fm)(t,e);let s=!1;t.setVisible(e);for(const r of t.get(\"layers\"))if(1!=(0,a.W1)(r)||s){if(1==(0,a.W1)(r))return;r.setVisible(e)}else this.changeBaseLayerVisibility(null,null),s=!0}changeTerrainLayerVisibility(t,e){for(const s of this.data.terrainLayers)\"terrain\"==s.type&&(s.visible=s==e,s.active=s.visible);this.hsEventBusService.LayerManagerBaseLayerVisibilityChanges.next(e)}changeBaseLayerVisibility(t=null,e=null){if(null===e||void 0!==e.layer){for(const s of this.data.baselayers){if(!s.layer)continue;const r=s==e;this.baselayersVisible&&(s.galleryMiniMenu=r),t?(s.visible=r,s.active=r,s.layer.set(\"visible\",r,!r)):this.baselayersVisible?s.layer.setVisible(!1):s.visible&&s.layer.setVisible(!0)}t?(this.baselayersVisible&&(e.active=!0),this.baselayersVisible=!0):this.baselayersVisible=!this.baselayersVisible,this.hsEventBusService.LayerManagerBaseLayerVisibilityChanges.next(e)}}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(V.F),o.KVO(b.Q),o.KVO(m.MJ),o.KVO(v.z))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var N=h(70152),q=h(39974),_=h(54360),te=h(18968),se=h(65623),re=h(54100);let ie=(()=>{class c{constructor(t,e,s,r,i,n,l){this.hsConfig=t,this.hsLog=e,this.zone=s,this.hsUtilsService=r,this.hsToastService=i,this.hsLanguageService=n,this.hsEventBusService=l}loadingEvents(t){const e=t.layer,s=(0,a.lg)(e);if((0,a.W1)(e)&&this.hsConfig.componentsEnabled.basemapGallery||void 0!==s&&1!=s)return;const r=e.get(\"cluster\")?e.getSource().getSource():e.getSource();if(!r)return void this.hsLog.error(`Layer ${(0,a.LK)(e)} has no source`);const i={pending:0,total:0,loadError:0,loaded:!0,error:void 0,percents:0};t.loadProgress=i;const n=this.determineLayerType(e);if(!n)return;this.createLoadingProgressTimer(i,e);const l=this.subscribeToEventSubject(1,i,e),u=this.subscribeToEventSubject(-1,i,e);r.on(`${n}loadstart`,y=>{l.next(!0)}),r.on(`${n}loadend`,y=>{u.next(!0),i.error=!1}),r.on(`${n}loaderror`,y=>{this.loadError(i,e,this[`${n}LoadFailed`])})}determineLayerType(t){return this.hsUtilsService.instOf(t,P.A)?\"features\":this.hsUtilsService.instOf(t,se.A)?\"image\":this.hsUtilsService.instOf(t,re.A)?\"tile\":void 0}loadError(t,e,s){t.loadError+=1,this.changeLoadCounter(e,t,-1),s&&s.bind(this)(t,e)}featuresLoadFailed(t,e){t&&(t.error=!0),this.hsToastService.createToastPopupMessage(\"LAYERS.featuresLoadError\",`${(0,a.LK)(e)}: ${this.hsLanguageService.getTranslationIgnoreNonExisting(\"ADDLAYERS.ERROR\",\"someErrorHappened\",null)}`,{})}imageLoadFailed(t,e){t.loaded=!0,t.error=!0}tileLoadFailed(t,e){t.loadError==t.total&&(t.error=!0)}createLoadingProgressTimer(t,e){t.timer=new A.B,t.timer.pipe((0,N.B)(2e3),function ee(){return(0,q.N)((c,w)=>{let t,e=!1;c.subscribe((0,_._)(w,s=>{const r=t;t=s,e&&w.next([r,s]),e=!0}))})}()).subscribe(([s,r])=>{(0==t.pending||s===r&&0!=r)&&this.zone.run(()=>{t.total=0,0!=r&&(t.pending=0),t.percents=0,this.hsEventBusService.layerLoaded.next(e)})})}subscribeToEventSubject(t,e,s){const r=new A.B;return r.pipe((0,te.r)(r.pipe((0,N.B)(100)))).subscribe(i=>{e.total+=1==t?i.length:0,this.changeLoadCounter(s,e,i.length*t)}),r}changeLoadCounter(t,e,s){e.pending+=s,e.loaded=0===e.pending;let r=0;e.total>0&&(r=Math.round((e.total-e.pending)/e.total*100)),this.zone.run(()=>{e.percents=100===r?0:r}),e.timer.next(e.pending),s>0&&this.hsEventBusService.layerLoading.next({layer:t,progress:e})}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(b.Q),o.KVO(U.r),o.KVO(o.SKi),o.KVO(m.MJ),o.KVO(G.ST),o.KVO(p.LJ),o.KVO(v.z))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();class ae{constructor(){this.folders={hsl_path:\"\",coded_path:\"0-\",layers:[],sub_folders:[],indent:0},this.layers=[],this.baselayers=[],this.terrainLayers=[],this.filter=\"\"}}let ne=(()=>{class c{constructor(t,e,s,r,i,n,l,u,y,d,L,ce,he,ue,ye,de,fe,Le,ve,ge){var g=this;this.hsConfig=t,this.hsDimensionTimeService=e,this.hsEventBusService=s,this.hsLanguageService=r,this.hsLayerEditorVectorLayerService=i,this.hsLayerManagerMetadata=n,this.hsLayerSelectorService=l,this.hsLayerUtilsService=u,this.hsLayoutService=y,this.hsLog=d,this.hsMapService=L,this.hsQueuesService=ce,this.hsAddDataOwsService=he,this.hsShareUrlService=ue,this.hsToastService=ye,this.hsUtilsService=de,this.sanitizer=fe,this.hsLayerManagerUtilsService=Le,this.hsLayerManagerVisibilityService=ve,this.hsLoadingProgressService=ge,this.data=new ae,this.menuExpanded=!1,this.zIndexValue=0,this.hsLayerManagerVisibilityService.data=this.data,this.hsEventBusService.layerManagerUpdates.subscribe(E=>{this.refreshLists()}),this.hsEventBusService.layerDimensionDefinitionChanges.subscribe(E=>{if(this.hsDimensionTimeService.layerIsWmsT(E)){const M=this.data.layers.find(R=>R.layer==E);M&&this.hsDimensionTimeService.setupTimeLayer(M)}}),this.hsMapService.loaded().then(function(){var E=(0,f.A)(function*(M){for(const R of M.getLayers().getArray())g.applyZIndex(R),yield g.layerAdded({element:R},!0);g.sortFoldersByZ(),g.sortLayersByZ(g.data.layers),g.hsEventBusService.layerManagerUpdates.next(null),g.toggleEditLayerByUrlParam(),g.boxLayersInit(),g.setupMapEventHandlers(M)});return function(M){return E.apply(this,arguments)}}())}destroy(){for(const t of this.mapEventHandlers)(0,K.e)(t)}setupMapEventHandlers(t){const e=t.getLayers().on(\"add\",i=>{this.applyZIndex(i.element,!(0,a.Ko)(i.element)),0!=(0,a.lg)(i.element)&&this.layerAdded(i,(0,a.IN)(i.element))}),s=t.getLayers().on(\"remove\",i=>this.layerRemoved(i)),r=t.getView().on(\"change:resolution\",this.hsUtilsService.debounce(i=>this.resolutionChangeDebounceCallback(),200,!1,this));this.mapEventHandlers=[e,s,r],this.hsEventBusService.mapEventHandlersSet.next()}layerAdded(t,e){var s=this;return(0,f.A)(function*(){const r=t.element;s.hsLayerManagerUtilsService.checkLayerHealth(r);const i=(0,a.lg)(r)??!0;r.on(\"change:visible\",l=>s.hsLayerManagerVisibilityService.layerVisibilityChanged(l)),s.hsLayerUtilsService.isLayerVectorLayer(r)&&(0,a.dB)(r)&&(s.hsLayerEditorVectorLayerService.layersClusteredFromStart.push(r),yield s.hsLayerEditorVectorLayerService.cluster(!0,r,s.hsConfig.clusteringDistance||40,!1));const n={title:s.hsLayerUtilsService.getLayerTitle(r),abstract:(0,a.lQ)(r),layer:r,grayed:!s.hsLayerManagerVisibilityService.isLayerInResolutionInterval(r),visible:r.getVisible(),showInLayerManager:i,uid:s.hsUtilsService.generateUuid(),idString(){return\"layer\"+(this.coded_path||\"\")+(this.uid||\"\")},type:yield s.hsLayerManagerUtilsService.getLayerSourceType(r),source:s.hsLayerManagerUtilsService.getLayerSourceUrl(r)};if(s.hsLoadingProgressService.loadingEvents(n),n.trackBy=`${n.uid} ${n.position}`,r.on(\"propertychange\",l=>{\"title\"==l.key&&(n.title=s.hsLayerUtilsService.getLayerTitle(r)),l.key==a.uu&&(n.showInLayerManager=(0,a.lg)(r)??!0,n.showInLayerManager&&s.populateFolders(r))}),!0!==(0,a.W1)(r)){if(i&&s.populateFolders(r),n.legends=(0,a.pL)(r),s.data.layers.push(n),(0,a.vx)(r)){const l=s.hsLayerUtilsService.getLayerParams(r);l?.LAYERS&&(0,a.SG)(r,l.LAYERS)}!1!==(0,a.Jt)(r)&&s.hsQueuesService.ensureQueue(\"wmsGetCapabilities\",1,1e4).push(function(){var u=(0,f.A)(function*(y){try{yield s.hsLayerManagerMetadata.fillMetadata(n),n.grayed=!s.hsLayerManagerVisibilityService.isLayerInResolutionInterval(r),y()}catch(d){y(d)}});return function(y){return u.apply(this,arguments)}}())}else n.active=r.getVisible(),n.active&&s.hsLayerManagerVisibilityService.changeBaseLayerVisibility(!0,n),n.thumbnail=s.hsLayerManagerUtilsService.getImage(r),s.data.baselayers.push(n),(0,a.y9)(r)&&!(0,a.rG)(r)&&setTimeout(()=>{s.setGreyscale(n)},100);(0,a.mG)(r)||(0,a.RO)(r,(0,a.LK)(r)),s.sortFoldersByZ(),e||(s.hsEventBusService.layerAdditions.next(n),s.hsEventBusService.layerManagerUpdates.next(r),s.hsEventBusService.compositionEdits.next())})()}updateLayerListPositions(){this.data.layers=this.sortLayersByZ(this.data.layers)}sortLayersByZ(t){const e=this.hsConfig.reverseLayerList??!0;return t.sort((s,r)=>((s=s.layer.getZIndex())<(r=r.layer.getZIndex())?-1:s>r?1:0)*(e?-1:1))}refreshLists(){this.data.baselayers=Array.from(this.data.baselayers),this.data.terrainLayers=Array.from(this.data.terrainLayers)}getLayerByTitle(t){let e;for(const s of this.data.layers)s.title==t&&(e=s);return e}getLayerDescriptorForOlLayer(t,e=!1){const r=this.data[e?\"baselayers\":\"layers\"].filter(i=>i.layer==t);if(r.length>0)return r[0]}populateFolders(t){let e=(0,a.Yn)(t);(!e||\"Other\"==e||this.hsLanguageService.getTranslation(\"LAYERMANAGER\").other?.toLowerCase()===e.toLowerCase())&&(e=\"other\",(0,a.SO)(t,e));const s=e.split(\"/\");let r=this.data.folders;const i=t.getZIndex();for(let n=0;n<s.length;n++){const l=r.sub_folders.find(u=>u.name===s[n]);if(l)r=l;else{const d={sub_folders:[],indent:n,layers:[],name:s[n],hsl_path:`${r.hsl_path}${\"\"!==r.hsl_path?\"/\":\"\"}${s[n]}`,coded_path:`${r.coded_path}${r.sub_folders.length}-`,visible:!0,zIndex:i};r.sub_folders.push(d),r=d}}r.zIndex=r.zIndex<i?i:r.zIndex,r.layers.push(t)}cleanFolders(t){if(0!=(0,a.lg)(t))if(null!=(0,a.Yn)(t)&&\"undefined\"!==(0,a.Yn)(t)){const s=(0,a.Yn)(t).split(\"/\");let r=this.data.folders;for(let i=0;i<s.length;i++)for(const n of r.sub_folders)n.name==s[i]&&(r=n);r.layers.splice(r.layers.indexOf(t),1);for(let i=s.length;i>0&&0==r.layers.length&&0==r.sub_folders.length;i--){let n=this.data.folders;if(i>1)for(let u=0;u<i-1;u++)for(const y of n.sub_folders)y.name==s[u]&&(n=y);const l=n.sub_folders.indexOf(r);l>-1&&n.sub_folders.splice(l,1),r=n}}else{const e=this.data.folders.layers.indexOf(t);e>-1&&this.data.folders.layers.splice(e,1)}}layerRemoved(t){this.cleanFolders(t.element);for(let s=0;s<this.data.layers.length;s++)this.data.layers[s].layer==t.element&&this.data.layers.splice(s,1);for(let s=0;s<this.data.baselayers.length;s++)this.data.baselayers[s].layer==t.element&&this.data.baselayers.splice(s,1);this.removeFromArray(this.hsLayerEditorVectorLayerService.layersClusteredFromStart,t.element),this.hsEventBusService.layerManagerUpdates.next(t.element),this.hsEventBusService.layerRemovals.next(t.element),!1!==(0,a.lg)(t.element)&&this.hsEventBusService.compositionEdits.next();const e=this.hsMapService.getMap().getLayers().getArray();this.zIndexValue>e.length&&this.zIndexValue--}removeFromArray(t,e){for(let s=0;s<t.length;s++)t[s]==e&&t.splice(s,1)}boxLayersInit(){if(null!=this.hsConfig.box_layers){this.data.box_layers=this.hsConfig.box_layers;for(const t of this.data.box_layers){let e=!1,s=!1;for(const r of t.get(\"layers\").getArray())1==r.get(\"visible\")&&1==(0,a.W1)(r)?s=!0:1==r.get(\"visible\")&&(e=!0);t.thumbnail=(0,a.Eb)(t),(0,a.Fm)(t,s||e)}}}activateTheme(t){let e=!0;1==(0,a.FQ)(t)&&(e=!1),(0,a.Fm)(t,e);let s=!1;t.setVisible(e);for(const r of t.get(\"layers\"))if(1!=(0,a.W1)(r)||s){if(1==(0,a.W1)(r))return;r.setVisible(e)}else this.hsLayerManagerVisibilityService.changeBaseLayerVisibility(null,null),s=!0}toggleLayerEditor(t,e,s){(0,a.jA)(t.layer)||this.hsLayerManagerMetadata.fillMetadata(t),(\"sublayers\"!=e||1==t.hasSublayers)&&(this.hsLayerSelectorService.currentLayer!=t?(this.toggleCurrentLayer(t),this.menuExpanded&&(this.menuExpanded=!1),t[e]=!0):(t[e]=!t[e],t[s]||this.toggleCurrentLayer(t)))}toggleCurrentLayer(t){if(this.hsLayerSelectorService.currentLayer!==t)return this.setCurrentLayer(t),!1;t.sublayers=!1,t.settings=!1,this.hsLayerSelectorService.select(null),this.updateGetParam(void 0)}setCurrentLayer(t){try{return this.updateGetParam(t.title),t.checkedSubLayers||(t.checkedSubLayers={},t.withChildren={}),this.hsLayerSelectorService.select(t),!1}catch(e){this.hsLog.error(e)}}updateGetParam(t){const e={};e[x.HS_PRMS.layerSelected]=t,this.hsShareUrlService.updateCustomParams(e)}setGreyscale(t){const e=this.hsLayoutService.contentWrapper.querySelector(\".ol-layers > div:first-child\");e.classList.contains(\"hs-greyscale\")?(e.classList.remove(\"hs-greyscale\"),(0,a.K1)(t.layer,!1)):(e.classList.add(\"hs-greyscale\"),(0,a.K1)(t.layer,!0)),setTimeout(()=>{t.layer.getSource().changed(),t.galleryMiniMenu=!1},0)}sortFoldersByZ(){this.data.folders.sub_folders.sort((t,e)=>(t.zIndex<e.zIndex?-1:t.zIndex>e.zIndex?1:0)*(this.hsConfig.reverseLayerList??1?-1:1))}resolutionChangeDebounceCallback(){setTimeout(()=>{for(let t=0;t<this.data.layers.length;t++){const e=!this.hsLayerManagerVisibilityService.isLayerInResolutionInterval(this.data.layers[t].layer);this.data.layers[t].grayed!=e&&(this.data.layers[t].grayed=e)}this.timer=null},250)}toggleEditLayerByUrlParam(){const t=this.hsShareUrlService.getParamValue(x.HS_PRMS.layerSelected);null!=t&&setTimeout(()=>{const e=this.data.layers.find(s=>s.title==t);void 0!==e&&(this.toggleLayerEditor(e,\"settings\",\"sublayers\"),this.hsEventBusService.layerSelectedFromUrl.next(e.layer))},500)}setPathMaxZIndex(t){let e;if((0,a.W1)(t))e=this.data.baselayers;else{let s=(0,a.Yn)(t);s=s??\"other\",e=this.data.layers.filter(r=>(0,a.Yn)(r.layer)==s)}if(e.length>0){const s=Math.max(...e.map(r=>r.layer.getZIndex()||0));t.setZIndex(s+1);for(const r of this.data.layers.filter(i=>i.layer.getZIndex()>=t.getZIndex()))r.layer.setZIndex(r.layer.getZIndex()+1)}}applyZIndex(t,e){e&&!1!==(0,a.lg)(t)&&this.setPathMaxZIndex(t),null==t.getZIndex()?t.setZIndex(this.zIndexValue++):this.zIndexValue++}makeSafeAndTranslate(t,e){const s=this.hsLanguageService.getTranslationIgnoreNonExisting(t,e,void 0);return s?this.sanitizer.bypassSecurityTrustHtml(s):\"\"}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(b.Q),o.KVO(S.C6),o.KVO(v.z),o.KVO(p.LJ),o.KVO(D),o.KVO(H),o.KVO(I),o.KVO(m.Xp),o.KVO(J.F),o.KVO(U.r),o.KVO(V.F),o.KVO(X.x),o.KVO(C.Dn),o.KVO(x.HsShareUrlService),o.KVO(G.ST),o.KVO(m.MJ),o.KVO(Q.up),o.KVO(B),o.KVO(W),o.KVO(ie))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})();var oe=h(35901);let le=(()=>{class c{constructor(t,e,s,r,i){this.hsLayerSelectorService=t,this.hsLayerUtilsService=e,this.hsMapService=s,this.hsAddDataOwsService=r,this.hsLayerManagerUtilsService=i}copyLayer(t){var e=this;return(0,f.A)(function*(){const s=e.createCopyTitle(t),r=e.hsLayerSelectorService.currentLayer.layer;if(e.hsLayerUtilsService.isLayerVectorLayer(r))e.copyVectorLayer(s);else{const i=e.hsLayerUtilsService.getURL(r);let n=(0,a.jA)(r)?.Name;(!n||\"number\"==typeof n)&&(n=(0,a.mG)(r));const l=yield e.hsLayerManagerUtilsService.getLayerSourceType(r),u=yield e.hsAddDataOwsService.connectToOWS({type:l.toLowerCase(),uri:i,layer:n,getOnly:!0});if(u[0]){u[0].setProperties(r.getProperties()),(0,a.D6)(u[0],s);const y=e.hsLayerUtilsService.getLayerParams(r)?.LAYERS;y&&(0,a.P3)(u[0],y),e.hsLayerUtilsService.updateLayerParams(u[0],e.hsLayerUtilsService.getLayerParams(r)),e.hsLayerUtilsService.updateLayerParams(u[0],{STYLES:null,LAYERS:(0,a.eg)(r)}),e.hsMapService.getMap().addLayer(u[0])}}})()}copyVectorLayer(t){let e;const s=this.hsLayerSelectorService.currentLayer.layer;e=this.hsLayerUtilsService.isLayerClustered(s)?s.getSource().getSource()?.getFeatures():s.getSource()?.getFeatures();const r=new P.A({properties:s.getProperties(),source:new oe.A({features:e}),style:s.getStyle()});(0,a.D6)(r,t),(0,a.RO)(r,(0,a.mG)(s)),this.hsMapService.addLayer(r)}createCopyTitle(t){const e=(0,a.mG)(this.hsLayerSelectorService.currentLayer.layer);let s=(0,a.LK)(this.hsLayerSelectorService.currentLayer.layer),r=0;if(t&&t!==s)s=t;else{const i=this.hsMapService.getLayersArray().filter(n=>(0,a.mG)(n)==e);r=void 0!==i?i.length:0,s=s.replace(/\\([0-9]\\)/g,\"\").trimEnd(),s+=` (${r})`}return s}static#e=this.\\u0275fac=function(e){return new(e||c)(o.KVO(I),o.KVO(m.Xp),o.KVO(V.F),o.KVO(C.Dn),o.KVO(B))};static#t=this.\\u0275prov=o.jDH({token:c,factory:c.\\u0275fac,providedIn:\"root\"})}return c})()},18968:(Z,T,h)=>{h.d(T,{r:()=>o});var f=h(39974),K=h(85343),x=h(54360),a=h(58750);function o(b){return(0,f.N)((S,v)=>{let p=[];return S.subscribe((0,x._)(v,O=>p.push(O),()=>{v.next(p),v.complete()})),(0,a.Tg)(b).subscribe((0,x._)(v,()=>{const O=p;p=[],v.next(O)},K.l)),()=>{p=null}})}}}]);"],"names":[],"sourceRoot":""}